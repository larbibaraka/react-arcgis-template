(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/support/Query":74,"esri/tasks/support/QuantizationParameters":85,"esri/tasks/support/StatisticDefinition":93,"esri/layers/support/PixelBlock":456,"esri/layers/support/rasterFunctions/pixelUtils":823})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{456:function(t,e,r){var i,o;i=[r.dj.c(t.i),e,r(29),r(28),r(36),r(33),r(38),r(37),r(30)],void 0===(o=function(t,e,r,i,o,n,s,a,l){var p=a.getLogger("esri.layers.support.PixelBlock");return function(t){function e(e){var r=t.call(this,e)||this;return r.width=null,r.height=null,r.pixelType="f32",r.validPixelCount=null,r.mask=null,r.maskIsAlpha=!1,r.pixels=null,r.statistics=null,r}var n;return r(e,t),n=e,e.prototype.castPixelType=function(t){if(!t)return"f32";var e=t.toLowerCase();return["u1","u2","u4"].indexOf(e)>-1?e="u8":-1===["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(e)&&(e="f32"),e},e.prototype.getPlaneCount=function(){return this.pixels&&this.pixels.length},e.prototype.addData=function(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new o("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics||{minValue:null,maxValue:null})},e.prototype.getAsRGBA=function(){var t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)},e.prototype.getAsRGBAFloat=function(){var t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t},e.prototype.updateStatistics=function(){var t=this;this.statistics=this.pixels.map(function(e){return t._calculateBandStatistics(e,t.mask)});var e=this.mask,r=0;if(e)for(var i=0;i<e.length;i++)e[i]&&r++;else r=this.width*this.height;this.validPixelCount=r},e.prototype.clamp=function(t){if(t&&"f64"!==t&&"f32"!==t){var e;switch(t){case"u8":e=[0,255];break;case"u16":e=[0,65535];break;case"u32":e=[0,4294967295];break;case"s8":e=[-128,127];break;case"s16":e=[-32768,32767];break;case"s32":e=[-2147483648,2147483647];break;default:e=[-3.4e39,3.4e39]}for(var r,i,o,n=e[0],s=e[1],a=this.pixels,l=this.width*this.height,p=a.length,u=[],h=0;h<p;h++){o=this._createEmptyBand(t,l),r=a[h];for(var c=0;c<l;c++)i=r[c],o[c]=i>s?s:i<n?n:i;u.push(o)}this.pixels=u,this.pixelType=t}},e.prototype.clone=function(){var t=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0));var e,r=this.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];var i=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=i?this.pixels[e].slice(0,this.pixels[e].length):new r(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=s.clone(this.statistics[e]);return t},e.prototype.getPixelArrayConstructor=function(t){var e;switch(t){case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"u32":e=Uint32Array;break;case"f32":e=Float32Array;break;case"f64":e=Float64Array;break;default:e=Float32Array}return e},e.prototype._createEmptyBand=function(t,e){return new(this.getPixelArrayConstructor(t))(e)},e.prototype._fillFrom8Bit=function(t){var e=this,r=e.mask,i=e.maskIsAlpha,o=e.pixels;if(t&&o&&o.length){var n,s,a,l;n=s=a=o[0],o.length>=3?(s=o[1],a=o[2]):2===o.length&&(s=o[1]);var u=new Uint32Array(t),h=this.width*this.height;if(n.length===h)if(r&&r.length===h)if(i)for(l=0;l<h;l++)r[l]&&(u[l]=r[l]<<24|a[l]<<16|s[l]<<8|n[l]);else for(l=0;l<h;l++)r[l]&&(u[l]=255<<24|a[l]<<16|s[l]<<8|n[l]);else for(l=0;l<h;l++)u[l]=255<<24|a[l]<<16|s[l]<<8|n[l];else p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")},e.prototype._fillFromNon8Bit=function(t){var e=this,r=e.pixels,i=e.mask,o=e.statistics;if(t&&r&&r.length){var n=this.pixelType,s=1,a=0;if(o&&o.length>0)a=o.map(function(t){return t.minValue}).reduce(function(t,e){return Math.min(t,e)}),s=255/o.map(function(t){return t.maxValue-t.minValue}).reduce(function(t,e){return Math.max(t,e)});else{var l=255;"s8"===n?(a=-128,l=127):"u16"===n?l=65535:"s16"===n?(a=-32768,l=32767):"u32"===n?l=4294967295:"s32"===n?(a=-2147483648,l=2147483647):"f32"===n?(a=-3.4e39,l=3.4e39):"f64"===n&&(a=-Number.MAX_VALUE,l=Number.MAX_VALUE),s=255/(l-a)}var u,h,c,y,f,d=new Uint32Array(t),m=this.width*this.height;if((u=h=c=r[0]).length!==m)return p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(r.length>=2)if(h=r[1],r.length>=3&&(c=r[2]),i&&i.length===m)for(y=0;y<m;y++)i[y]&&(d[y]=255<<24|(c[y]-a)*s<<16|(h[y]-a)*s<<8|(u[y]-a)*s);else for(y=0;y<m;y++)d[y]=255<<24|(c[y]-a)*s<<16|(h[y]-a)*s<<8|(u[y]-a)*s;else if(i&&i.length===m)for(y=0;y<m;y++)f=(u[y]-a)*s,i[y]&&(d[y]=255<<24|f<<16|f<<8|f);else for(y=0;y<m;y++)f=(u[y]-a)*s,d[y]=255<<24|f<<16|f<<8|f}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")},e.prototype._fillFrom32Bit=function(t){var e,r,i,o,n=this.pixels,s=this.mask;if(!t||!n||!n.length)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");e=r=i=n[0],n.length>=3?(r=n[1],i=n[2]):2===n.length&&(r=n[1]);var a=this.width*this.height;if(e.length!==a)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var l=0;if(s&&s.length===a)for(o=0;o<a;o++)t[l++]=e[o],t[l++]=r[o],t[l++]=i[o],t[l++]=1&s[o];else for(o=0;o<a;o++)t[l++]=e[o],t[l++]=r[o],t[l++]=i[o],t[l++]=1},e.prototype._calculateBandStatistics=function(t,e){var r,i=1/0,o=-1/0,n=t.length,s=0;if(e)for(r=0;r<n;r++)e[r]&&(i=(s=t[r])<i?s:i,o=s>o?s:o);else for(r=0;r<n;r++)i=(s=t[r])<i?s:i,o=s>o?s:o;return{minValue:i,maxValue:o}},i([l.property({json:{write:!0}})],e.prototype,"width",void 0),i([l.property({json:{write:!0}})],e.prototype,"height",void 0),i([l.property({json:{write:!0}})],e.prototype,"pixelType",void 0),i([l.cast("pixelType")],e.prototype,"castPixelType",null),i([l.property({json:{write:!0}})],e.prototype,"validPixelCount",void 0),i([l.property({json:{write:!0}})],e.prototype,"mask",void 0),i([l.property({json:{write:!0}})],e.prototype,"maskIsAlpha",void 0),i([l.property({json:{write:!0}})],e.prototype,"pixels",void 0),i([l.property({json:{write:!0}})],e.prototype,"statistics",void 0),n=i([l.subclass("esri.layers.support.PixelBlock")],e)}(l.declared(n.JSONSupport))}.apply(null,i))||(t.exports=o)},74:function(t,e,r){var i,o;i=[r.dj.c(t.i),e,r(29),r(28),r(42),r(42),r(71),r(97),r(41),r(33),r(38),r(30),r(48),r(46),r(80),r(85),r(93)],void 0===(o=function(t,e,r,i,o,n,s,a,l,p,u,h,c,y,f,d,m){var x=new l.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),v=new l.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(t){function e(e){var r=t.call(this,e)||this;return r.cacheHint=!1,r.datumTransformation=null,r.distance=void 0,r.gdbVersion=null,r.geometry=null,r.geometryPrecision=void 0,r.groupByFieldsForStatistics=null,r.having=null,r.historicMoment=null,r.maxAllowableOffset=void 0,r.maxRecordCountFactor=1,r.multipatchOption=null,r.num=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.outStatistics=null,r.parameterValues=null,r.pixelSize=null,r.quantizationParameters=null,r.rangeValues=null,r.relationParameter=null,r.resultType=null,r.returnCentroid=!1,r.returnDistinctValues=!1,r.returnExceededLimitFeatures=!0,r.returnGeometry=!1,r.returnQueryGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.source=null,r.spatialRelationship="intersects",r.start=void 0,r.sqlFormat=null,r.text=null,r.timeExtent=null,r.units=null,r.where=null,r}var l;return r(e,t),l=e,e.from=function(t){return c.ensureClass(l,t)},e.prototype.castDatumTransformation=function(t){return"number"==typeof t||"object"==typeof t?t:null},e.prototype.writeHistoricMoment=function(t,e){e.historicMoment=t&&t.getTime()},e.prototype.writeParameterValues=function(t,e){if(t){var r={};for(var i in t){var o=t[i];Array.isArray(o)?r[i]=o.map(function(t){return t instanceof Date?t.getTime():t}):o instanceof Date?r[i]=o.getTime():r[i]=o}e.parameterValues=r}},e.prototype.writeStart=function(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"},e.prototype.writeWhere=function(t,e){e.where=t||"1=1"},e.prototype.clone=function(){return new l(u.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))},e.MAX_MAX_RECORD_COUNT_FACTOR=5,i([h.property({type:Boolean,json:{write:!0,default:!1}})],e.prototype,"cacheHint",void 0),i([h.property({json:{write:!0}})],e.prototype,"datumTransformation",void 0),i([h.cast("datumTransformation")],e.prototype,"castDatumTransformation",null),i([h.property({type:Number,json:{write:{overridePolicy:function(t){return{enabled:t>0}}}}})],e.prototype,"distance",void 0),i([h.property({type:String,json:{write:!0}})],e.prototype,"gdbVersion",void 0),i([h.property({types:n.geometryTypes,json:{read:y.fromJSON,write:!0}})],e.prototype,"geometry",void 0),i([h.property({type:Number,json:{write:!0}})],e.prototype,"geometryPrecision",void 0),i([h.property({type:[String],json:{write:!0}})],e.prototype,"groupByFieldsForStatistics",void 0),i([h.property({type:String,json:{write:!0}})],e.prototype,"having",void 0),i([h.property({type:Date})],e.prototype,"historicMoment",void 0),i([h.writer("historicMoment")],e.prototype,"writeHistoricMoment",null),i([h.property({type:Number,json:{write:!0}})],e.prototype,"maxAllowableOffset",void 0),i([h.property({type:Number,cast:function(t){return t<1?1:t>l.MAX_MAX_RECORD_COUNT_FACTOR?l.MAX_MAX_RECORD_COUNT_FACTOR:t},json:{write:{overridePolicy:function(t){return{enabled:t>1}}}}})],e.prototype,"maxRecordCountFactor",void 0),i([h.property({type:String,json:{write:!0}})],e.prototype,"multipatchOption",void 0),i([h.property({type:Number,json:{read:{source:"resultRecordCount"}}})],e.prototype,"num",void 0),i([h.property({type:[Number],json:{write:!0}})],e.prototype,"objectIds",void 0),i([h.property({type:[String],json:{write:!0}})],e.prototype,"orderByFields",void 0),i([h.property({type:[String],json:{write:!0}})],e.prototype,"outFields",void 0),i([h.property({type:o.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],e.prototype,"outSpatialReference",void 0),i([h.property({type:[m],json:{write:!0}})],e.prototype,"outStatistics",void 0),i([h.property({json:{write:!0}})],e.prototype,"parameterValues",void 0),i([h.writer("parameterValues")],e.prototype,"writeParameterValues",null),i([h.property({types:s.symbolTypes,json:{read:f.read,write:!0}})],e.prototype,"pixelSize",void 0),i([h.property({type:d.default,json:{write:!0}})],e.prototype,"quantizationParameters",void 0),i([h.property({type:[Object],json:{write:!0}})],e.prototype,"rangeValues",void 0),i([h.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],e.prototype,"relationParameter",void 0),i([h.property({type:String,json:{write:!0}})],e.prototype,"resultType",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:t}}}}})],e.prototype,"returnCentroid",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:t}}}}})],e.prototype,"returnDistinctValues",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:!t}}}}})],e.prototype,"returnExceededLimitFeatures",void 0),i([h.property({type:Boolean,json:{write:!0}})],e.prototype,"returnGeometry",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:t}}}}})],e.prototype,"returnQueryGeometry",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:t}}}}})],e.prototype,"returnM",void 0),i([h.property({type:Boolean,json:{write:{overridePolicy:function(t){return{enabled:t}}}}})],e.prototype,"returnZ",void 0),i([h.property({json:{write:!0}})],e.prototype,"source",void 0),i([h.property({type:String,json:{read:{source:"spatialRel",reader:x.read},write:{target:"spatialRel",writer:x.write}}})],e.prototype,"spatialRelationship",void 0),i([h.property({type:Number,json:{read:{source:"resultOffset"}}})],e.prototype,"start",void 0),i([h.writer("start"),h.writer("num")],e.prototype,"writeStart",null),i([h.property({type:String,json:{write:!0}})],e.prototype,"sqlFormat",void 0),i([h.property({type:String,json:{write:!0}})],e.prototype,"text",void 0),i([h.property({type:a,json:{write:!0}})],e.prototype,"timeExtent",void 0),i([h.property({type:String,json:{read:v.read,write:{writer:v.write,overridePolicy:function(t){return{enabled:t&&this.distance>0}}}}})],e.prototype,"units",void 0),i([h.property({type:String,json:{write:{overridePolicy:function(t){return{enabled:null!=t||this.start>0}}}}})],e.prototype,"where",void 0),i([h.writer("where")],e.prototype,"writeWhere",null),l=i([h.subclass("esri.tasks.support.Query")],e)}(h.declared(p.JSONSupport))}.apply(null,i))||(t.exports=o)},823:function(t,e,r){var i,o;i=[r.dj.c(t.i),e,r(456)],void 0===(o=function(t,e,r){function i(t,e){var r,i,o=Math.min(Math.max(t,-100),100),n=Math.min(Math.max(e,-100),100),s=new Uint8Array(256);for(r=0;r<256;r++)o>0&&o<100?i=(200*r-25500+510*n)/(2*(100-o))+128:o<=0&&o>-100?i=(200*r-25500+510*n)*(100+o)/2e4+128:100===o?i=(i=200*r-25500+256*(100-o)+510*n)>0?255:0:-100===o&&(i=128),s[r]=i>255?255:i<0?0:i;return s}function o(t,e,r,i,o,n,s,a){return{xmin:o<=r*t?0:o<r*t+t?o-r*t:t,ymin:n<=i*e?0:n<i*e+e?n-i*e:e,xmax:o+s<=r*t?0:o+s<r*t+t?o+s-r*t:t,ymax:n+a<=i*e?0:n+a<i*e+e?n+a-i*e:e}}var n=function(t){return t&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0},s={createColormapLUT:function(t){if(t){var e=t.colormap;if(e&&0!==e.length){var r=e.sort(function(t,e){return t[0]-e[0]}),i=0;r[0][0]<0&&(i=r[0][0]);var o,n=Math.max(256,r[r.length-1][0]-i+1),s=new Uint8Array(4*n),a=[],l=0,p=0,u=5===r[0].length;if(n>65536)return r.forEach(function(t){a[t[0]-i]=u?t.slice(1):t.slice(1).concat([255])}),{indexed2DColormap:a,offset:i,alphaSpecified:u};if(t.fillUnspecified)for(l=(o=r[p])[0]-i;l<n;l++)s[4*l]=o[1],s[4*l+1]=o[2],s[4*l+2]=o[3],s[4*l+3]=u?o[4]:255,l===o[0]-i&&(o=p===r.length-1?o:r[++p]);else for(l=0;l<r.length;l++)s[p=4*((o=r[l])[0]-i)]=o[1],s[p+1]=o[2],s[p+2]=o[3],s[p+3]=u?o[4]:255;return{indexedColormap:s,offset:i,alphaSpecified:u}}}},createContrastBrightnessLUT:i,createStretchLUT:function(t){var e=t.minCutOff,r=t.maxCutOff,o=t.gamma,n=t.pixelType,s=t.outMin||0,a=t.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(n))return null;var l,p,u=e.length,h=0;"s8"===n?h=-127:"s16"===n&&(h=-32767);var c=256;["u16","s16"].indexOf(n)>-1&&(c=65536);var y=[],f=[],d=a-s;for(l=0;l<u;l++)f[l]=r[l]-e[l],y[l]=d/(r[l]-e[l]);var m=o&&o.length>=u,x=[];if(m)for(l=0;l<u;l++)o[l]>1?o[l]>2?x[l]=6.5+Math.pow(o[l]-2,2.5):x[l]=6.5+100*Math.pow(2-o[l],4):x[l]=1;var v,w,g,A,k=[];if(m)for(l=0;l<u;l++){for(A=[],p=0;p<c;p++)v=((w=p+h)-e[l])/f[l],g=1,o[l]>1&&(g-=Math.pow(1/d,v*x[l])),w<r[l]&&w>e[l]?A[p]=Math.floor(g*d*Math.pow(v,1/o[l]))+s:w>=r[l]?A[p]=a:A[p]=s;k[l]=A}else for(l=0;l<u;l++){for(A=[],p=0;p<c;p++)(w=p+h)<=e[l]?A[p]=s:w>=r[l]?A[p]=a:A[p]=Math.floor((w-e[l])/f[l]*d)+s;k[l]=A}if(null!=t.contrastOffset){var S=i(t.contrastOffset,t.brightnessOffset);for(l=0;l<u;l++)for(A=k[l],p=0;p<c;p++)A[p]=S[A[p]]}return{lut:k,offset:h}},colorize:function(t,e){if(!n(t))return t;if(!e&&(e.indexedColormap||e.indexed2DColormap))return t;var r=t.clone(),i=r.pixels,o=r.mask,s=r.width*r.height;if(1!==i.length)return t;var a,l=e.indexedColormap,p=e.indexed2DColormap,u=e.offset,h=e.alphaSpecified,c=l.length-1,y=0,f=i[0],d=new Uint8Array(f.length),m=new Uint8Array(f.length),x=new Uint8Array(f.length),v=0;if(l)if(o)for(y=0;y<s;y++)o[y]&&((v=4*(f[y]-u))<u||v>c?o[y]=0:(d[y]=l[v],m[y]=l[v+1],x[y]=l[v+2],o[y]=l[v+3]));else{for(o=new Uint8Array(s),y=0;y<s;y++)(v=4*(f[y]-u))<u||v>c?o[y]=0:(d[y]=l[v],m[y]=l[v+1],x[y]=l[v+2],o[y]=l[v+3]);r.mask=o}else if(o)for(y=0;y<s;y++)o[y]&&(a=p[f[y]],d[y]=a[0],m[y]=a[1],x[y]=a[2],o[y]=a[3]);else{for(o=new Uint8Array(s),y=0;y<s;y++)a=p[f[y]],d[y]=a[0],m[y]=a[1],x[y]=a[2],o[y]=a[3];r.mask=o}return r.pixels=[d,m,x],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=h,r},estimateStatisticsHistograms:function(t){if(!n(t))return null;var e,r,i,o,s,a,l,p,u,h,c,y,f,d,m=t.pixels,x=t.mask,v=t.pixelType,w=t.statistics,g=t.width*t.height,A=m.length,k=[],S=[];for(o=0;o<A;o++){if(a=new Uint32Array(256),p=m[o],"u8"===v)if(e=-.5,r=255.5,x)for(s=0;s<g;s++)x[s]&&a[p[s]]++;else for(s=0;s<g;s++)a[p[s]]++;else{if(e=w[o].minValue,i=((r=w[o].maxValue)-e)/256,l=new Uint32Array(257),x)for(s=0;s<g;s++)x[s]&&l[Math.floor((p[s]-e)/i)]++;else for(s=0;s<g;s++)l[Math.floor((p[s]-e)/i)]++;for(s=0;s<255;s++)a[s]=l[s];a[255]=l[255]+l[256]}for(k.push({min:e,max:r,size:256,counts:a}),u=0,h=0,f=0,s=0;s<256;s++)u+=a[s],h+=s*a[s];for(d=h/u,s=0;s<256;s++)f+=a[s]*Math.pow(s-d,2);c=(d+.5)*(i=(r-e)/256)+e,y=Math.sqrt(f/(u-1))*i,S.push({min:e,max:r,avg:c,stddev:y})}return{statistics:S,histograms:k}},extractBands:function(t,e){return e&&n(t)?e&&e.some(function(e){return e>t.pixels.length})?t:new r({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map(function(e){return t.pixels[e]}),statistics:t.statistics&&e.map(function(e){return t.statistics[e]})}):t},stretch:function(t,e){if(!n(t))return null;var r,i,o,s,a,l=t.clone(),p=l.pixels,u=l.mask,h=e.minCutOff,c=e.maxCutOff,y=e.gamma,f=e.outMin||0,d=e.outMax||255,m=l.width*l.height,x=p.length,v=d-f,w=[],g=[];for(r=0;r<x;r++)g[r]=c[r]-h[r],w[r]=v/(c[r]-h[r]);var A=y&&y.length>=x,k=[];if(A)for(r=0;r<x;r++)y[r]>1?y[r]>2?k[r]=6.5+Math.pow(y[r]-2,2.5):k[r]=6.5+100*Math.pow(2-y[r],4):k[r]=1;if(A)if(null!=u){for(i=0;i<m;i++)if(u[i])for(r=0;r<x;r++)a=((o=p[r][i])-h[r])/g[r],s=1,y[r]>1&&(s-=Math.pow(1/v,a*k[r])),o<c[r]&&o>h[r]?p[r][i]=Math.floor(s*v*Math.pow(a,1/y[r]))+f:o>=c[r]?p[r][i]=d:p[r][i]=f}else for(i=0;i<m;i++)for(r=0;r<x;r++)a=((o=p[r][i])-h[r])/g[r],s=1,y[r]>1&&(s-=Math.pow(1/v,a*k[r])),o<c[r]&&o>h[r]?p[r][i]=Math.floor(s*v*Math.pow(a,1/y[r]))+f:o>=c[r]?p[r][i]=d:p[r][i]=f;else if(null!=u){for(i=0;i<m;i++)if(u[i])for(r=0;r<x;r++)(o=p[r][i])<c[r]&&o>h[r]?p[r][i]=Math.floor((o-h[r])/g[r]*v)+f:o>=c[r]?p[r][i]=d:p[r][i]=f}else for(i=0;i<m;i++)for(r=0;r<x;r++)(o=p[r][i])<c[r]&&o>h[r]?p[r][i]=Math.floor((o-h[r])/g[r]*v)+f:o>=c[r]?p[r][i]=d:p[r][i]=f;return l.pixelType="u8",l.updateStatistics(),l},lookupPixels:function(t,e){if(!n(t))return null;var i,o,s=t.pixels,a=t.mask,l=t.width*t.height,p=s.length,u=e.lut,h=e.offset;u&&1===u[0].length&&(u=s.map(function(){return u}));var c,y,f,d=[];if(h)if(null==a)for(i=0;i<p;i++){for(c=s[i],y=u[i],f=new Uint8Array(l),o=0;o<l;o++)f[o]=y[c[o]-h];d.push(f)}else for(i=0;i<p;i++){for(c=s[i],y=u[i],f=new Uint8Array(l),o=0;o<l;o++)a[o]&&(f[o]=y[c[o]-h]);d.push(f)}else if(null==a)for(i=0;i<p;i++){for(c=s[i],y=u[i],f=new Uint8Array(l),o=0;o<l;o++)f[o]=y[c[o]];d.push(f)}else for(i=0;i<p;i++){for(c=s[i],y=u[i],f=new Uint8Array(l),o=0;o<l;o++)a[o]&&(f[o]=y[c[o]]);d.push(f)}var m=new r({width:t.width,height:t.height,pixels:d,mask:a,pixelType:"u8"});return m.updateStatistics(),m},remapColor:function(t,e){if(!n(t))return null;var r,i,o,s,a,l,p=t.clone(),u=p.pixels,h=p.width*p.height,c=e.length,y=Math.floor(c/2),f=e[Math.floor(y)],d=u[0],m=!1,x=new Uint8Array(h),v=new Uint8Array(h),w=new Uint8Array(h),g=p.mask,A=4===e[0].mappedColor.length;for(g||((g=new Uint8Array(h)).fill(A?255:1),p.mask=g),a=0;a<h;a++)if(g[a]){for(r=d[a],m=!1,l=y,i=f,o=0,s=c-1;s-o>1;){if(r===i.value){m=!0;break}r>i.value?o=l:s=l,l=Math.floor((o+s)/2),i=e[Math.floor(l)]}m||(r===e[o].value?(i=e[o],m=!0):r===e[s].value?(i=e[s],m=!0):r<e[o].value?(m=!1,i=null):r>e[o].value&&(r<e[s].value?(i=e[o],m=!0):s===c-1?(m=!1,i=null):(i=e[s],m=!0))),m?(x[a]=i.mappedColor[0],v[a]=i.mappedColor[1],w[a]=i.mappedColor[2],g[a]=i.mappedColor[3]):x[a]=v[a]=w[a]=g[a]=0}return p.pixels=[x,v,w],p.mask=g,p.pixelType="u8",p.maskIsAlpha=A,p},mosaic:function(t,e,i,s){var a=t.filter(function(t){return n(t)})[0];if(null==a)return null;var l,p,u,h,c,y,f,d,m,x,v,w,g,A=s?s.width:e.width,k=s?s.height:e.height,S=a.width,b=a.height,M=e.width/S,j=e.height/b,C=i?i.x:0,R=i?i.y:0,P=a.pixelType,T=a.getPixelArrayConstructor(P),B=a.pixels.length,F=[];for(y=0;y<B;y++){for(p=new T(A*k),f=0;f<j;f++)for(d=0;d<M;d++)if(u=t[f*M+d])for(l=u.pixels[y],m=(v=o(S,b,d,f,C,R,A,k)).ymin;m<v.ymax;m++)for(h=(f*b+m-R)*A+(d*S-C),c=m*S,x=v.xmin;x<v.xmax;x++)p[h+x]=l[c+x];F.push(p)}if(t.some(function(t){return t&&t.mask&&t.mask.length>0}))for(w=new Uint8Array(A*k),f=0;f<j;f++)for(d=0;d<M;d++)if(g=(u=t[f*M+d])?u.mask:null,v=o(S,b,d,f,C,R,A,k),g)for(m=v.ymin;m<v.ymax;m++)for(h=(f*b+m-R)*A+(d*S-C),c=m*S,x=v.xmin;x<v.xmax;x++)w[h+x]=g[c+x];else if(u)for(m=v.ymin;m<v.ymax;m++)for(h=(f*b+m-R)*A+(d*S-C),c=m*S,x=v.xmin;x<v.xmax;x++)w[h+x]=1;else for(m=v.ymin;m<v.ymax;m++)for(h=(f*b+m-R)*A+(d*S-C),c=m*S,x=v.xmin;x<v.xmax;x++)w[h+x]=0;var U=new r({width:A,height:k,pixels:F,pixelType:P,mask:w});return U.updateStatistics(),U},mosaicPixelData:function(t,e){if(!t||0===t.length)return null;var r=t.filter(function(t){return t.pixelBlock})[0];if(!r)return null;var i=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,o=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,n=.01*Math.min(i,o),a=t.sort(function(t,e){return Math.abs(t.extent.ymax-e.extent.ymax)>n?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>n?t.extent.xmin-e.extent.xmin:0}),l=Math.min.apply(null,a.map(function(t){return t.extent.xmin})),p=Math.min.apply(null,a.map(function(t){return t.extent.ymin})),u=Math.max.apply(null,a.map(function(t){return t.extent.xmax})),h=Math.max.apply(null,a.map(function(t){return t.extent.ymax})),c={x:Math.round((e.xmin-l)/i),y:Math.round((h-e.ymax)/o)},y={width:Math.round((u-l)/i),height:Math.round((h-p)/o)},f={width:Math.round((e.xmax-e.xmin)/i),height:Math.round((e.ymax-e.ymin)/o)};if(Math.round(y.width/r.pixelBlock.width)*Math.round(y.height/r.pixelBlock.height)!==a.length||c.x<0||c.y<0||y.width<f.width||y.height<f.height)return null;var d=a.map(function(t){return t.pixelBlock});return{extent:e,pixelBlock:s.mosaic(d,y,c,f)}}};return s}.apply(null,i))||(t.exports=o)},85:function(t,e,r){var i,o;i=[r.dj.c(t.i),e,r(29),r(28),r(42),r(41),r(33),r(38),r(30)],void 0===(o=function(t,e,r,i,o,n,s,a,l){Object.defineProperty(e,"__esModule",{value:!0});var p=new n.default({upperLeft:"upper-left",lowerLeft:"lower-left"}),u=function(t){function e(e){var r=t.call(this,e)||this;return r.extent=null,r.mode="view",r.originPosition="upper-left",r.tolerance=1,r}var n;return r(e,t),n=e,e.prototype.clone=function(){return new n(a.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))},i([l.property({type:o.Extent,json:{write:!0}})],e.prototype,"extent",void 0),i([l.property({type:["view","edit"],json:{write:!0}})],e.prototype,"mode",void 0),i([l.property({type:String,json:{read:p.read,write:p.write}})],e.prototype,"originPosition",void 0),i([l.property({type:Number,json:{write:!0}})],e.prototype,"tolerance",void 0),n=i([l.subclass("esri.tasks.support.QuantizationParameters")],e)}(l.declared(s.JSONSupport));e.default=u}.apply(null,i))||(t.exports=o)},93:function(t,e,r){var i,o;i=[r.dj.c(t.i),e,r(29),r(28),r(33),r(30)],void 0===(o=function(t,e,r,i,o,n){return function(t){function e(e){var r=t.call(this,e)||this;return r.maxPointCount=void 0,r.maxRecordCount=void 0,r.maxVertexCount=void 0,r.onStatisticField=null,r.outStatisticFieldName=null,r.statisticType=null,r}var o;return r(e,t),o=e,e.prototype.clone=function(){return new o({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})},i([n.property({type:Number,json:{write:!0}})],e.prototype,"maxPointCount",void 0),i([n.property({type:Number,json:{write:!0}})],e.prototype,"maxRecordCount",void 0),i([n.property({type:Number,json:{write:!0}})],e.prototype,"maxVertexCount",void 0),i([n.property({type:String,json:{write:!0}})],e.prototype,"onStatisticField",void 0),i([n.property({type:String,json:{write:!0}})],e.prototype,"outStatisticFieldName",void 0),i([n.property({type:String,json:{write:!0}})],e.prototype,"statisticType",void 0),o=i([n.subclass("esri.tasks.support.StatisticDefinition")],e)}(n.declared(o.JSONSupport))}.apply(null,i))||(t.exports=o)}}]);