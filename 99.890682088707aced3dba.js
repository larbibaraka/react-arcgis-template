(function(){(this||window).webpackJsonp.registerAbsMids({"esri/portal/support/layersLoader":123,"esri/layers/support/lazyLayerLoader":270,"esri/renderers/support/styleUtils":323,"esri/portal/support/jsonContext":634})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{123:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(31),n(32),n(44),n(36),n(34),n(270),n(72),n(634),n(323)],void 0===(a=function(e,r,n,t,a,i,o,u,l,c,s){function p(e,r){return t(this,void 0,void 0,function(){var t,a,i,o,u,l;return n(this,function(n){switch(n.label){case 0:return t=e.instance,a=t.portalItem,i=a.url,o=a.title,u=c.createForItem(a),"group"===t.type?(t.read({title:o},u),[2,f(t,e)]):(i&&t.read({url:i},u),[4,h(e,r)]);case 1:return(l=n.sent())&&t.read(l,u),t.read({title:o},u),[2,s.loadStyleRenderer(t,u)]}})})}function f(e,r){var n,t,a=e.portalItem.type;switch(a){case"Feature Service":n=u.layerLookupMap.FeatureLayer;break;case"Stream Service":n=u.layerLookupMap.StreamLayer;break;case"Scene Service":n=u.layerLookupMap.SceneLayer;break;case"Feature Collection":n=u.layerLookupMap.FeatureLayer;break;default:throw new i("portal:unsupported-item-type-as-group","The item type '"+a+"' is not supported as a 'GroupLayer'")}return n().then(function(e){return t=e,h(r)}).then(function(r){return r&&Array.isArray(r.layers)?d(e,t,r):y(e,t)})}function y(e,r){if(!e.portalItem.url)return o.resolve();return a(e.portalItem.url,{responseType:"json",query:{f:"json"}}).then(function(n){var t=n.data;if(t&&Array.isArray(t.layers)){var a=t.layers.map(function(e){return{id:e.id,name:e.name}});return d(e,r,{layers:a})}})}function d(e,r,n){var t=n.showLegend,a=n.layers.slice();a.reverse(),a.forEach(function(n){var a=new r({portalItem:e.portalItem,layerId:n.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){var i={origin:"portal-item",portal:e.portalItem.portal||l.getDefault()};a.read(n,i),null!=t&&a.read({showLegend:t},i)}e.add(a)})}function h(e,r){if(!1===e.supportsData)return o.resolve();var n=e.instance;return n.portalItem.fetchData("json",r).catch(function(){return null}).then(function(e){var r,t=e;if(function(e){return"stream"!==e.type&&"layerId"in e}(n)){var a=!0;if(e&&Array.isArray(t.layers)){null==n.layerId&&(n.layerId=t.layers[0].id);for(var i=0;i<t.layers.length;i++)if(t.layers[i].id===n.layerId){r=t.layers[i];break}r&&(1===t.layers.length&&(a=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))}return a&&"service-name"!==n.sublayerTitleMode&&(n.sublayerTitleMode="item-title-and-service-name"),r}return e})}Object.defineProperty(r,"__esModule",{value:!0}),r.load=function(e,r){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return(t=e.instance.portalItem)&&t.id?[4,t.load(r)]:[2,o.resolve()];case 1:return n.sent(),function(e){var r=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(r.type))throw new i("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r.type,expectedType:e.supportedTypes.join(", ")})}(e),[2,p(e,r)]}})})}}.apply(null,t))||(e.exports=a)},270:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(34)],void 0===(a=function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.layerLookupMap={CSVLayer:function(){return t.create(function(e){return Promise.all([n.e(0),n.e(25),n.e(86)]).then(function(){var r=[n(127)];e.apply(null,r)}.bind(this)).catch(n.oe)})},ElevationLayer:function(){return t.create(function(e){return Promise.all([n.e(11),n.e(32)]).then(function(){var r=[n(118)];e.apply(null,r)}.bind(this)).catch(n.oe)})},FeatureLayer:function(){return t.create(function(e){return Promise.all([n.e(0),n.e(55)]).then(function(){var r=[n(87)];e.apply(null,r)}.bind(this)).catch(n.oe)})},GroupLayer:function(){return t.create(function(e){return n.e(31).then(function(){var r=[n(111)];e.apply(null,r)}.bind(this)).catch(n.oe)})},GeoRSSLayer:function(){return t.create(function(e){return n.e(74).then(function(){var r=[n(120)];e.apply(null,r)}.bind(this)).catch(n.oe)})},ImageryLayer:function(){return t.create(function(e){return Promise.all([n.e(1),n.e(13),n.e(17),n.e(87)]).then(function(){var r=[n(128)];e.apply(null,r)}.bind(this)).catch(n.oe)})},KMLLayer:function(){return t.create(function(e){return Promise.all([n.e(29),n.e(88)]).then(function(){var r=[n(129)];e.apply(null,r)}.bind(this)).catch(n.oe)})},MapImageLayer:function(){return t.create(function(e){return Promise.all([n.e(4),n.e(56)]).then(function(){var r=[n(109)];e.apply(null,r)}.bind(this)).catch(n.oe)})},MapNotesLayer:function(){return t.create(function(e){return Promise.all([n.e(0),n.e(52)]).then(function(){var r=[n(471)];e.apply(null,r)}.bind(this)).catch(n.oe)})},OpenStreetMapLayer:function(){return t.create(function(e){return n.e(65).then(function(){var r=[n(121)];e.apply(null,r)}.bind(this)).catch(n.oe)})},PointCloudLayer:function(){return t.create(function(e){return Promise.all([n.e(19),n.e(89)]).then(function(){var r=[n(130)];e.apply(null,r)}.bind(this)).catch(n.oe)})},SceneLayer:function(){return t.create(function(e){return Promise.all([n.e(0),n.e(24),n.e(90)]).then(function(){var r=[n(131)];e.apply(null,r)}.bind(this)).catch(n.oe)})},BuildingSceneLayer:function(){return t.create(function(e){return Promise.all([n.e(21),n.e(91)]).then(function(){var r=[n(132)];e.apply(null,r)}.bind(this)).catch(n.oe)})},IntegratedMeshLayer:function(){return t.create(function(e){return n.e(64).then(function(){var r=[n(122)];e.apply(null,r)}.bind(this)).catch(n.oe)})},StreamLayer:function(){return t.create(function(e){return Promise.all([n.e(0),n.e(26),n.e(92)]).then(function(){var r=[n(133)];e.apply(null,r)}.bind(this)).catch(n.oe)})},TileLayer:function(){return t.create(function(e){return Promise.all([n.e(4),n.e(12),n.e(93)]).then(function(){var r=[n(62)];e.apply(null,r)}.bind(this)).catch(n.oe)})},UnknownLayer:function(){return t.create(function(e){return n.e(110).then(function(){var r=[n(473)];e.apply(null,r)}.bind(this)).catch(n.oe)})},UnsupportedLayer:function(){return t.create(function(e){return n.e(111).then(function(){var r=[n(474)];e.apply(null,r)}.bind(this)).catch(n.oe)})},VectorTileLayer:function(){return t.create(function(e){return Promise.all([n.e(22),n.e(94)]).then(function(){var r=[n(134)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WebTileLayer:function(){return t.create(function(e){return n.e(70).then(function(){var r=[n(95)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WMSLayer:function(){return t.create(function(e){return Promise.all([n.e(30),n.e(95)]).then(function(){var r=[n(135)];e.apply(null,r)}.bind(this)).catch(n.oe)})},WMTSLayer:function(){return t.create(function(e){return n.e(54).then(function(){var r=[n(475)];e.apply(null,r)}.bind(this)).catch(n.oe)})},BingMapsLayer:function(){return t.create(function(e){return n.e(73).then(function(){var r=[n(51)];e.apply(null,r)}.bind(this)).catch(n.oe)})}}}.apply(null,t))||(e.exports=a)},323:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(31),n(32),n(311),n(34),n(183)],void 0===(a=function(e,r,n,t,a,i,o){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStyleRenderer=function(e,r,u){return t(this,void 0,void 0,function(){var t,l,c;return n(this,function(n){switch(n.label){case 0:return(t=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin))&&"unique-value"===t.type&&t.styleOrigin?[4,a.result(t.populateFromStyle())]:[3,2];case 1:l=n.sent(),i.throwIfAborted(u),!1===l.ok&&(c=l.error,r&&r.messages&&r.messages.push(new o("renderer:style-reference","Failed to create unique value renderer from style reference: "+c.message,{error:c,context:r})),e.clear("renderer",r.origin)),n.label=2;case 2:return[2]}})})}}.apply(null,t))||(e.exports=a)},634:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(39),n(72)],void 0===(a=function(e,r,n,t){Object.defineProperty(r,"__esModule",{value:!0}),r.createForItem=function(e){return{origin:"portal-item",url:n.urlToObject(e.itemUrl),portal:e.portal||t.getDefault()}}}.apply(null,t))||(e.exports=a)}}]);