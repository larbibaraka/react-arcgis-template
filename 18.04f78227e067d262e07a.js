(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/support/ClipArea":57,"esri/tasks/support/Query":74,"esri/layers/support/Field":78,"esri/tasks/support/QuantizationParameters":85,"esri/tasks/support/StatisticDefinition":93,"esri/tasks/support/FeatureSet":100,"esri/views/layers/LayerView":144,"esri/views/2d/layers/LayerView2D":149,"esri/views/layers/support/ClipRect":150,"esri/views/layers/support/Geometry":151,"esri/views/layers/support/Path":152,"esri/layers/graphics/data/projectionSupport":163,"esri/core/requireUtils":164,"esri/core/libs/gl-matrix-2/mat4":197,"esri/geometry/projection":289,"esri/geometry/pe":362,"esri/geometry/support/GeographicTransformation":363,"esri/geometry/support/GeographicTransformationStep":364,"esri/core/libs/gl-matrix-2/math/mat4":365,"esri/views/2d/layers/support/popupUtils2D":385,"esri/renderers/support/clickToleranceUtils":386,"esri/views/layers/support/FeatureFilter":387,"esri/views/layers/support/popupUtils":603,"esri/views/2d/layers/FeatureLayerView2D":819,"esri/views/2d/layers/features/support/rendererUtils":820,"esri/views/2d/layers/support/util":821,"esri/views/layers/support/FeatureEffect":822,"esri/AggregateGraphic":2173,"esri/views/2d/layers/features/tileRenderers":2174,"esri/views/2d/layers/support/FeatureLayerProxy":2175,"esri/views/layers/FeatureLayerView":2176,"esri/views/layers/support/ParsedFeatureEffect":2177,"esri/views/layers/support/cssFilterParser":2178,"esri/views/layers/support/Transition":2179})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[18,107,113],{100:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(42),r(77),r(41),r(33),r(40),r(30),r(50),r(46),r(78)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d){var f=new a.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),h=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return n(t,e),t.prototype.readFeatures=function(e,t){for(var r=l.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var a=e[i],s=o.fromJSON(a),p=a.geometry&&a.geometry.spatialReference;u.isSome(s.geometry)&&!p&&(s.geometry.spatialReference=r),n.push(s)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)f.write(e,t,r,n);else{var i=this.features;if(i)for(var o=0,a=i;o<a.length;o++){var s=a[o];if(s&&u.isSome(s.geometry))return void f.write(s.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];o&&u.isSome(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,o=i[0],a=i[1],s=this.features,p=this._getQuantizationFunction(this.geometryType,function(e){return Math.round((e-o)/r)},function(e){return Math.round((a-e)/n)}),l=0,c=s.length;l<c;l++)p(u.expect(s[l].geometry))||(s.splice(l,1),l--,c--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this,t=e.geometryType,r=e.features,n=e.transform;if(!n)return this;for(var i=n.translate,o=i[0],a=i[1],s=n.scale,p=s[0],l=s[1],c=this._getHydrationFunction(t,function(e){return e*p+o},function(e){return a-e*l}),d=0,f=r;d<f.length;d++){var h=f[d].geometry;u.isSome(h)&&c(h)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,o=[],a=0,s=e.length;a<s;a++){var u=e[a];if(a>0){var p=t(u[0]),l=r(u[1]);p===n&&l===i||(o.push([p-n,l-i]),n=p,i=l)}else n=t(u[0]),i=r(u[1]),o.push([n,i])}return o.length>0?o:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=c.isPolygon(e)?e.rings:e.paths,o=[],a=0,s=i.length;a<s;a++){var u=i[a],p=n._quantizePoints(u,t,r);p&&o.push(p)}return o.length>0?(c.isPolygon(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=c.isPolygon(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var u=o[a],p=0,l=u.length;p<l;p++){var d=u[p];p>0?(n+=d[0],i+=d[1]):(n=d[0],i=d[1]),d[0]=t(n),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,s=o.length;a<s;a++){var u=o[a];a>0?(n+=u[0],i+=u[1]):(n=u[0],i=u[1]),u[0]=t(n),u[1]=r(i)}}:void 0},r([p.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([p.property({type:[o],json:{write:!0}})],t.prototype,"features",void 0),r([p.reader("features")],t.prototype,"readFeatures",null),r([p.property({type:[d],json:{write:!0}})],t.prototype,"fields",void 0),r([p.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],t.prototype,"geometryType",void 0),r([p.writer("geometryType")],t.prototype,"writeGeometryType",null),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([p.property({types:i.geometryTypes,json:{read:c.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([p.property({type:l,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([p.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([p.property({json:{write:!0}})],t.prototype,"transform",void 0),r([p.subclass("esri.tasks.support.FeatureSet")],t)}(p.declared(s.JSONSupport));return h.prototype.toJSON.isDefaultToJSON=!0,h||(h={}),h}.apply(null,n))||(e.exports=i)},144:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(47),r(106),r(141),r(167),r(37),r(154),r(30)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r.parent=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";throw u.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),t}})},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},n([l.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([l.property()],t.prototype,"layer",void 0),n([l.property()],t.prototype,"parent",void 0),n([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),n([l.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),n([l.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),n([l.subclass("esri.views.layers.LayerView")],t)}(l.declared(a.HandleOwnerMixin(s.IdentifiableMixin(p.EsriPromiseMixin(o.EventedMixin(i))))))}.apply(null,n))||(e.exports=i)},149:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(55),r(168),r(56),r(30),r(57),r(150),r(151),r(152)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c){Object.defineProperty(t,"__esModule",{value:!0});var d=i.ofType({key:"type",base:u,typeMap:{rect:p,path:c,geometry:l}});t.LayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new d,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()},function(){});var t=function(){return e.notifyChange("rendering")};this.handles.add([a.init(this,"suspended",function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),a.init(this,["fullOpacity","container"],function(){e.container&&(e.container.opacity=e.fullOpacity)},!0),a.on(this,"container","post-render",t),a.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var o=!n,a=!i;!o&&e<=n&&(o=!0),!a&&e>=i&&(a=!0),t=o&&a}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},n([s.property({type:d,set:function(e){var t=o.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),n([s.property()],t.prototype,"moving",void 0),n([s.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),n([s.property()],t.prototype,"attached",void 0),n([s.property()],t.prototype,"container",void 0),n([s.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([s.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([s.property()],t.prototype,"updateRequested",void 0),n([s.property({dependsOn:["updateRequested","attached","suspended"]})],t.prototype,"updating",null),n([s.property()],t.prototype,"view",void 0),n([s.subclass("esri.views.2d.layers.LayerView2D")],t)}(s.declared(e))}}.apply(null,n))||(e.exports=i)},150:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(30),r(57)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var o;return n(t,e),o=t,t.prototype.clone=function(){return new o({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r([i.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),o=r([i.subclass("esri.views.layers.support.ClipRect")],t)}(i.declared(o))}.apply(null,n))||(e.exports=i)},151:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(42),r(30),r(96),r(46),r(57)],void 0===(i=function(e,t,r,n,i,o,a,s,u){var p={base:a,key:"type",typeMap:{extent:i.Extent,polygon:i.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var i;return n(t,e),i=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({geometry:this.geometry.clone()})},r([o.property({types:p,json:{read:s.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r([o.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),i=r([o.subclass("esri.views.layers.support.Geometry")],t)}(o.declared(u))}.apply(null,n))||(e.exports=i)},152:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(30),r(57)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return n(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([i.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r([i.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r([i.subclass("esri.views.layers.support.Path")],t)}(i.declared(o))}.apply(null,n))||(e.exports=i)},163:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(36),r(34),r(289),r(63),r(90)],void 0===(i=function(e,t,r,n,i,o,a,s,u){function p(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,h),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(t.xmin,t.ymin,h),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,h),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:l(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:c(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function l(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(c(o,t))}return r}function c(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=t(o[0],o[1],[0,0]);r.push(a),o.length>2&&a.push(o[2]),o.length>3&&a.push(o[3])}return r}function d(e,t){return!(!s.isValid(e)||!s.isValid(t)||s.equals(e,t)||u.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var f="feature-store:unsupported-query",h=[0,0];t.doesBrowserSupportProjection=function(e,t){return!d(e,t)||a.isSupported()},t.checkProjectionSupport=function(e,t){return n(this,void 0,void 0,function(){var n,o,s;return r(this,function(r){if(!t)return[2];if(Array.isArray(e)){for(n=0,o=e;n<o.length;n++)if(d((s=o[n]).geometry&&s.geometry.spatialReference,t)){if(a.isSupported())return[2,a.load()];throw new i(f,"projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!d(e,t))return[2];if(a.isSupported())return[2,a.load()];throw new i(f,"projection not supported",{inSpatialReference:e,outSpatialReference:t})})})};var y=p.bind(null,u.lngLatToXY),v=p.bind(null,u.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),s.isValid(t)&&s.isValid(r)&&!s.equals(t,r)?u.canProject(t,r)?s.isWebMercator(r)?y(e):v(e):a.projectMany([e],t,r,null,!0)[0]:e):e};var _=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,i){return n(this,void 0,void 0,function(){var n,a=this;return r(this,function(r){return e&&e.length&&t&&i&&!s.equals(t,i)||o.resolve(e),n={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null},this._jobs.push(n),[2,o.create(function(e){n.resolve=e,null===a._timer&&(a._timer=setTimeout(a._process,10))},function(){var e=a._jobs.indexOf(n);e>-1&&a._jobs.splice(e,1)})]})})},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference;(0,e.resolve)(u.canProject(r,n)?s.isWebMercator(n)?t.map(y):t.map(v):a.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,i){return n(this,void 0,void 0,function(){return r(this,function(r){return[2,_.push(e,t,i)]})})}}.apply(null,n))||(e.exports=i)},164:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(187),r(37),r(34)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=n.getLogger("esri.core.requireUtils");t.when=function e(t,n){return r.deprecatedFunction(o,"when",{moduleName:"requireUtils",replacement:"Use `promiseUtils.create()` instead.",version:"4.10",warnOnce:!0}),Array.isArray(n)?i.create(function(e){t(n,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[n]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,n))||(e.exports=i)},197:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(365)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=r}.apply(null,n))||(e.exports=i)},2173:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(35),r(77),r(30)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.prototype.getEffectivePopupTemplate=function(e){if(void 0===e&&(e=!1),this.popupTemplate)return this.popupTemplate;var t=this.sourceLayer&&this.sourceLayer.featureReduction;return t&&"popupTemplate"in t?t.popupTemplate:null},t.prototype.getObjectId=function(){return this.objectId},t.prototype.clone=function(){return new o(i({objectId:this.objectId},this.cloneProperties()))},r([a.property({type:Number,json:{read:!0}})],t.prototype,"objectId",void 0),o=r([a.subclass("esri.AggregateGraphic")],t)}(a.declared(o))}.apply(null,n))||(e.exports=i)},2174:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(405),r(34)],void 0===(i=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t){if(!e)return i.resolve(null);switch(e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return i.create(function(e){n(function(){return r.e(60).then(function(){var t=[r(2359)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(t)});case"heatmap":return i.create(function(e){n(function(){return r.e(100).then(function(){var t=[r(2361)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(t)})}return i.resolve(null)}}.apply(null,n))||(e.exports=i)},2175:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(35),r(31),r(32),r(154),r(34),r(164),r(205),r(30),r.dj.m(e)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d){Object.defineProperty(t,"__esModule",{value:!0});var f=function(t){function i(e){var r=t.call(this,e)||this;return r._startupResolver=u.createResolver(),r.isReady=!1,r}return r(i,t),i.prototype.initialize=function(){this._controller=u.createAbortController(),this.addResolvingPromise(this._startWorker(this._controller.signal))},i.prototype.destroy=function(){this._connection.close(),this._controller.abort()},Object.defineProperty(i.prototype,"tileRenderer",{set:function(e){this.client.tileRenderer=e},enumerable:!0,configurable:!0}),i.prototype.startup=function(e,t,r,n){return a(this,void 0,void 0,function(){var i,a,s,u;return o(this,function(o){switch(o.label){case 0:return i=this._controller.signal,a=function(e){return Array.isArray(e)}(r.source)?{transferList:r.source,signal:i}:void 0,s=e.tileInfo.toJSON(),u={service:r,config:t,tileInfo:s,options:n},[4,this._connection.invoke("startup",u,a)];case 1:return o.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}})})},i.prototype.update=function(e,t){return a(this,void 0,void 0,function(){var r;return o(this,function(n){switch(n.label){case 0:return r={config:e,options:t},[4,this._startupResolver.promise];case 1:return n.sent(),[2,this._connection.invoke("update",r)]}})})},i.prototype.setHighlight=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.setHighlight",e)]}})})},i.prototype.refresh=function(){return a(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.refresh")]}})})},i.prototype.setViewState=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("setViewState",e.toJSON())]}})})},i.prototype.queryFeatures=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatures",e.toJSON(),t)]}})})},i.prototype.queryObjectIds=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryObjectIds",e.toJSON(),t)]}})})},i.prototype.queryFeatureCount=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatureCount",e.toJSON(),t)]}})})},i.prototype.queryExtent=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){return[2,this._connection.invoke("controller.queryExtent",e.toJSON(),t)]})})},i.prototype.queryLatestObservations=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryLatestObservations",e.toJSON(),t)]}})})},i.prototype.queryStatistics=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.queryStatistics",e)]}})})},i.prototype.getObjectId=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getObjectId",e)]}})})},i.prototype.getLocalId=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getLocalId",e)]}})})},i.prototype.getAggregate=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getAggregate",e)]}})})},i.prototype.getAggregateValueRanges=function(){return a(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}})})},i.prototype.mapValidLocalIds=function(e){return a(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",e)]}})})},i.prototype.onEdits=function(e){return a(this,void 0,void 0,function(){var t,r,n;return o(this,function(i){switch(i.label){case 0:return[4,this._startupResolver.promise];case 1:return i.sent(),t=e.addedFeatures,r=e.deletedFeatures,n=e.updatedFeatures,[2,this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:n})]}})})},i.prototype.enableEvent=function(e,t){return a(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.enableEvent",{name:e,value:t})]}})})},i.prototype._startWorker=function(t){return a(this,void 0,void 0,function(){var r,n;return o(this,function(i){switch(i.label){case 0:return r=p.getAbsMid("../features/Pipeline",e,d),[4,l.open(r,{client:this.client,strategy:"dedicated",signal:t})];case 1:return n=i.sent(),this._connection=n,[2]}})})},n([c.property()],i.prototype,"isReady",void 0),n([c.property()],i.prototype,"client",void 0),n([c.property()],i.prototype,"tileRenderer",null),n([c.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],i)}(c.declared(s.EsriPromise));t.default=f}.apply(null,n))||(e.exports=i)},2176:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(35),r(31),r(32),r(36),r(107),r(37),r(40),r(34),r(56),r(30),r(65),r(178),r(209),r(74),r(822),r(387),r(603)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d,f,h,y,v,_,g,m,b){Object.defineProperty(t,"__esModule",{value:!0});var P=p.getLogger("esri.views.layers.FeatureLayerView");t.FeatureLayerView=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._updatingRequiredFieldsPromise=null,n.effect=null,n.filter=null,n.layer=null,n.requiredFields=null,n.view=null,n}return r(t,e),t.prototype.initialize=function(){var e=this;d.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","filter","effect","layer.timeInfo","timeExtent"],function(){return e._handleRequiredFieldsChange()},!0)},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this,t=e.layer,r=e.layer.fields,n=e.requiredFields;return"outFields"in t&&t.outFields?h.fixFields(r,h.unpackFieldNames(r,t.outFields).concat(n)):h.fixFields(r,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){P.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){return void 0===t&&(t={}),this.inherited(arguments,[e,t])},t.prototype.createQuery=function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=l.isSome(this.filter)?this.filter.createQuery(e):new _(e);return this.timeExtent&&(t.timeExtent=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t},t.prototype.queryFeatures=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryObjectIds=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryFeatureCount=function(e,t){return this.inherited(arguments,[e,t])},t.prototype.queryExtent=function(e,t){return this.inherited(arguments,[e,t])},t.prototype._loadArcadeModules=function(e){if(e.get("expressionInfos.length"))return v.loadArcade()},t.prototype._handleRequiredFieldsChange=function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then(function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)})},t.prototype._updateRequiredFields=function(){return a(this,void 0,void 0,function(){var e,t,r,n,i,a,s,p,d,f,y,v,_;return o(this,function(o){switch(o.label){case 0:return this.layer&&this.view?(e="3d"===this.view.type,r=(t=this).layer,n=t.layer,i=n.fields,a=n.objectIdField,s=n.renderer,p=new Set,[4,c.eachAlways([s?s.collectRequiredFields(p,i):null,h.collectLabelingFields(p,r),e?h.collectElevationFields(p,r):null,l.isSome(this.filter)?h.collectFilterFields(p,r,this.filter):null,this.effect?h.collectFilterFields(p,r,this.effect.filter):null])]):[2];case 1:for(d=o.sent(),r.timeInfo&&this.timeExtent&&h.collectFields(p,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),f=0,y=d;f<y.length;f++)(v=y[f]).error&&P.error(v.error);return h.collectField(p,i,a),_=u.valuesOfSet(p).sort(),this._set("requiredFields",_),[2]}})})},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?b.getFetchPopupTemplate(this.layer,e)?void 0:new s("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new s("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(e){return a(this,void 0,void 0,function(){var t,r,n,i,a,s,u,p,d,f,y,v;return o(this,function(o){switch(o.label){case 0:return(t=l.isSome(e)?e.clientGraphics:null)&&0!==t.length?(r=[],n=[],i=this.layer,a=b.getFetchPopupTemplate(i,e),l.isSome(a)?[4,this._loadArcadeModules(a)]:[2,c.resolve([])]):[2,c.resolve([])];case 1:return s=o.sent(),u=s&&s.arcadeUtils.hasGeometryOperations(a),[4,this.createPopupQuery(e)];case 2:for(p=o.sent(),d=h.unpackFieldNames(i.fields,p.outFields),f=0,y=t;f<y.length;f++)v=y[f],u||!h.featureHasFields(d,v)?n.push(v):r.push(v);return 0===n.length?[2,c.resolve(r)]:(p.objectIds=n.map(function(e){return e.attributes[i.objectIdField]}),[2,i.queryFeatures(p).then(function(e){return r.concat(e.features)}).catch(function(){return n})])}})})},t.prototype.createPopupQuery=function(e){return a(this,void 0,void 0,function(){var t,r,n;return o(this,function(i){switch(i.label){case 0:return t=this.layer,(r=t.createQuery()).returnGeometry=!0,r.returnZ=!0,r.returnM=!0,n=r,[4,b.getRequiredFields(this.layer,b.getFetchPopupTemplate(this.layer,e))];case 1:return n.outFields=i.sent(),r.outSpatialReference=this.view.spatialReference,[2,r]}})})},n([f.property()],t.prototype,"_updatingRequiredFieldsPromise",void 0),n([f.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),n([f.property({type:g})],t.prototype,"effect",void 0),n([f.property({type:m})],t.prototype,"filter",void 0),n([f.property(y.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),n([f.property()],t.prototype,"layer",void 0),n([f.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),n([f.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),n([f.property({readOnly:!0})],t.prototype,"requiredFields",void 0),n([f.property()],t.prototype,"view",void 0),n([f.subclass("esri.views.layers.FeatureLayerView")],t)}(f.declared(e))}}.apply(null,n))||(e.exports=i)},2177:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(35),r(36),r(33),r(37),r(40),r(30),r(197),r(770),r(2178)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d){var f=s.getLogger("esri.views.layers.support.ParsedFeatureEffect"),h={grayscale:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return l.mat4.transpose(r,r)},sepia:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return l.mat4.transpose(r,r)},saturate:function(e){var t=e.amount,r=c.mat4f32.fromValues(.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return l.mat4.transpose(r,r)},"hue-rotate":function(e){var t=Math.sin(e.angle*Math.PI/180),r=Math.cos(e.angle*Math.PI/180),n=c.mat4f32.fromValues(.213+.787*r-.213*t,.715-.715*r-.715*t,.072-.072*r+.928*t,0,.213-.213*r+.143*t,.715+.285*r+.14*t,.072-.072*r-.283*t,0,.213-.213*r-.787*t,.715-.715*r+.715*t,.072+.928*r+.072*t,0,0,0,0,1);return l.mat4.transpose(n,n)},invert:function(e){var t=1-2*e.amount,r=e.amount,n=c.mat4f32.fromValues(t,0,0,r,0,t,0,r,0,0,t,r,0,0,0,1);return l.mat4.transpose(n,n)},brightness:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return l.mat4.transpose(r,r)},contrast:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return l.mat4.transpose(r,r)}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customTransforms=null,t.done=!0,t}var a;return n(t,e),a=t,t.fromString=function(e){var t=[],r=null;try{for(var n=0,i=d.parse(e);n<i.length;n++){var s=i[n];"opacity"===s.type?r=s:t.push(s)}}catch(e){f.error(new o("invalid-type","Encountered an error when parsing css",e))}return new a({transforms:t,opacity:r})},t.prototype.getOpacity=function(){return u.isSome(this.opacity)?this.opacity.amount:1},t.prototype.getColorMatrix=function(){var e=this;return(this.transforms||[]).map(function(e){return i({},e)}).reverse().reduce(function(t,r){return l.mat4.multiply(t,t,e._getFactory(r)(r))},c.mat4f32.create())},t.prototype.clone=function(){return new a({transforms:this.transforms&&this.transforms.map(function(e){return i({},e)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(e){return i({},e)})})},t.prototype._getFactory=function(e){var t=h[e.type];if(t)return t;if(this.customTransforms)for(var r=0,n=this.customTransforms;r<n.length;r++){var i=function(t){if(t.type===e.type){var r=c.mat4f32.fromValues.apply(c.mat4f32,t.matrix),n=l.mat4.transpose(r,r);return{value:function(){return n}}}}(n[r]);if("object"==typeof i)return i.value}return f.error("invalid-type","No effect "+e.type+" exists"),function(){return c.mat4f32.create()}},r([p.property()],t.prototype,"opacity",void 0),r([p.property()],t.prototype,"transforms",void 0),r([p.property()],t.prototype,"customTransforms",void 0),a=r([p.subclass("esri.views.layers.support.ParsedFeatureEffect")],t)}(p.declared(a.JSONSupport))}.apply(null,n))||(e.exports=i)},2178:function(e,t,r){var n;void 0===(n=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+n(t)+'"':"end of input")+" found."},{SyntaxError:e,parse:function(t,r){function n(){return t.substring(Lt,Vt)}function i(e,t){return{type:"literal",text:e,ignoreCase:t}}function o(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function a(e){return{type:"other",description:e}}function s(e){var r,n=Dt[e];if(n)return n;for(r=e-1;!Dt[r];)r--;for(n={line:(n=Dt[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Dt[e]=n,n}function u(e,t){var r=s(e),n=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function p(e){Vt<Ht||(Vt>Ht&&(Ht=Vt,zt=[]),zt.push(e))}function l(t,r){return new e(t,null,null,r)}function c(){var e;return(e=function(){var e,r,n;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,4)===O?(n=O,Vt+=4):(n=w,0===Jt&&p(x)),n!==w&&b()!==w?(Lt=e,r=M(),e=r):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(R)),e}())===w&&(e=function(){var e,t;if(e=[],(t=d())!==w)for(;t!==w;)e.push(t),t=d();else e=w;return e}()),e}function d(){var e;return(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,5)===F?(n=F,Vt+=5):(n=w,0===Jt&&p(j)),n!==w&&b()!==w&&(i=_())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=C(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(T)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,11)===k?(n=k,Vt+=11):(n=w,0===Jt&&p(q)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=G(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(I)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,9)===V?(n=V,Vt+=9):(n=w,0===Jt&&p(L)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=D(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(U)),e}())===w&&(e=function(){var e,r,n,i,o,a,s,u;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,12)===z?(n=z,Vt+=12):(n=w,0===Jt&&p(J)),n!==w&&b()!==w&&(i=_())!==w&&b()!==w&&(o=_())!==w&&b()!==w?((a=_())===w&&(a=null),a!==w&&b()!==w?((s=function(){var e,r,n,i,o,a,s,u,l,c,d,v,_,g,P;return e=Vt,35===t.charCodeAt(Vt)?(r=_t,Vt++):(r=w,0===Jt&&p(gt)),r!==w?(n=Vt,(i=m())!==w&&(o=m())!==w?n=i=[i,o]:(Vt=n,n=w),n!==w?(i=Vt,(o=m())!==w&&(a=m())!==w?i=o=[o,a]:(Vt=i,i=w),i!==w?(o=Vt,(a=m())!==w&&(s=m())!==w?o=a=[a,s]:(Vt=o,o=w),o!==w?(Lt=e,r=mt(n,i,o),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,35===t.charCodeAt(Vt)?(r=_t,Vt++):(r=w,0===Jt&&p(gt)),r!==w&&(n=m())!==w&&(i=m())!==w&&(o=m())!==w?(Lt=e,r=bt(n,i,o),e=r):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,5)===Pt?(r=Pt,Vt+=5):(r=w,0===Jt&&p(wt)),r!==w&&(n=b())!==w&&(i=y())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=y())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=y())!==w&&(d=b())!==w?(44===t.charCodeAt(Vt)?(v=St,Vt++):(v=w,0===Jt&&p(Et)),v!==w&&(_=b())!==w&&(g=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(P=N,Vt++):(P=w,0===Jt&&p(A)),P!==w?(Lt=e,r=Rt(i,u,c,g),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,5)===Pt?(r=Pt,Vt+=5):(r=w,0===Jt&&p(wt)),r!==w&&(n=b())!==w&&(i=h())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=h())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=h())!==w?(44===t.charCodeAt(Vt)?(d=St,Vt++):(d=w,0===Jt&&p(Et)),d!==w&&(v=b())!==w&&(_=f())!==w?(41===t.charCodeAt(Vt)?(g=N,Vt++):(g=w,0===Jt&&p(A)),g!==w?(Lt=e,r=Ot(i,u,c,_),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,5)===Pt?(r=Pt,Vt+=5):(r=w,0===Jt&&p(wt)),r!==w&&(n=b())!==w&&(i=y())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=y())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=y())!==w&&(d=b())!==w?(41===t.charCodeAt(Vt)?(v=N,Vt++):(v=w,0===Jt&&p(A)),v!==w?(Lt=e,r=xt(i,u,c),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,5)===Pt?(r=Pt,Vt+=5):(r=w,0===Jt&&p(wt)),r!==w&&(n=b())!==w&&(i=h())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=h())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=h())!==w?(41===t.charCodeAt(Vt)?(d=N,Vt++):(d=w,0===Jt&&p(A)),d!==w?(Lt=e,r=Mt(i,u,c),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,4)===Tt?(r=Tt,Vt+=4):(r=w,0===Jt&&p(Ft)),r!==w&&(n=b())!==w&&(i=y())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=y())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=y())!==w&&(d=b())!==w?(41===t.charCodeAt(Vt)?(v=N,Vt++):(v=w,0===Jt&&p(A)),v!==w?(Lt=e,r=xt(i,u,c),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=Vt,t.substr(Vt,4)===Tt?(r=Tt,Vt+=4):(r=w,0===Jt&&p(Ft)),r!==w&&(n=b())!==w&&(i=h())!==w&&(o=b())!==w?(44===t.charCodeAt(Vt)?(a=St,Vt++):(a=w,0===Jt&&p(Et)),a!==w&&(s=b())!==w&&(u=h())!==w&&b()!==w?(44===t.charCodeAt(Vt)?(l=St,Vt++):(l=w,0===Jt&&p(Et)),l!==w&&b()!==w&&(c=h())!==w&&(d=b())!==w?(41===t.charCodeAt(Vt)?(v=N,Vt++):(v=w,0===Jt&&p(A)),v!==w?(Lt=e,r=Mt(i,u,c),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),e===w&&(e=function(){var e,r,n;if(Jt++,e=Vt,r=[],qt.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(Gt)),n!==w)for(;n!==w;)r.push(n),qt.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(Gt));else r=w;return r!==w&&(Lt=e,r=Ut()),Jt--,(e=r)===w&&(r=w,0===Jt&&p(kt)),e}())))))))),e}())===w&&(s=null),s!==w&&b()!==w?(41===t.charCodeAt(Vt)?(u=N,Vt++):(u=w,0===Jt&&p(A)),u!==w&&b()!==w?(Lt=e,r=B(i,o,a,s),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(H)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,10)===Y?(n=Y,Vt+=10):(n=w,0===Jt&&p(Q)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=Z(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(X)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,11)===K?(n=K,Vt+=11):(n=w,0===Jt&&p($)),n!==w&&b()!==w&&(i=function(){var e,r,n;return Jt++,e=Vt,(r=function(){var e,r;return Jt++,e=Vt,xe.test(t.charAt(Vt))?(r=t.charAt(Vt),Vt++):(r=w,0===Jt&&p(Me)),r===w&&(r=null),r!==w&&h()!==w?(Lt=e,r=Re(),e=r):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(Oe)),e}())!==w&&(n=v())!==w?(Lt=e,r=Ae(r,n),e=r):(Vt=e,e=w),e===w&&(e=Vt,48===t.charCodeAt(Vt)?(r=Ce,Vt++):(r=w,0===Jt&&p(Ie)),r!==w?((n=v())===w&&(n=null),n!==w?(Lt=e,r=ke(),e=r):(Vt=e,e=w)):(Vt=e,e=w)),Jt--,e===w&&(r=w,0===Jt&&p(Ne)),e}())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=ee(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(W)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,7)===re?(n=re,Vt+=7):(n=w,0===Jt&&p(ne)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=ie(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(te)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,8)===ae?(n=ae,Vt+=8):(n=w,0===Jt&&p(se)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=ue(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(oe)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,9)===le?(n=le,Vt+=9):(n=w,0===Jt&&p(ce)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=de(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(pe)),e}())===w&&(e=function(){var e,r,n,i,o;return Jt++,e=Vt,(r=b())!==w?(t.substr(Vt,6)===he?(n=he,Vt+=6):(n=w,0===Jt&&p(ye)),n!==w&&b()!==w&&(i=f())!==w&&b()!==w?(41===t.charCodeAt(Vt)?(o=N,Vt++):(o=w,0===Jt&&p(A)),o!==w&&b()!==w?(Lt=e,r=ve(i),e=r):(Vt=e,e=w)):(Vt=e,e=w)):(Vt=e,e=w),Jt--,e===w&&(r=w,0===Jt&&p(fe)),e}()),e}function f(){var e;return Jt++,(e=y())===w&&(e=h()),Jt--,e===w&&0===Jt&&p(_e),e}function h(){var e,r,n,i,o;if(Jt++,e=Vt,r=[],me.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(be)),n!==w)for(;n!==w;)r.push(n),me.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(be));else r=w;if(r!==w)if(46===t.charCodeAt(Vt)?(n=Se,Vt++):(n=w,0===Jt&&p(Ee)),n!==w){if(i=[],me.test(t.charAt(Vt))?(o=t.charAt(Vt),Vt++):(o=w,0===Jt&&p(be)),o!==w)for(;o!==w;)i.push(o),me.test(t.charAt(Vt))?(o=t.charAt(Vt),Vt++):(o=w,0===Jt&&p(be));else i=w;i!==w?(Lt=e,e=r=Re()):(Vt=e,e=w)}else Vt=e,e=w;else Vt=e,e=w;return e===w&&(e=function(){var e,r,n;if(Jt++,e=Vt,r=[],me.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(be)),n!==w)for(;n!==w;)r.push(n),me.test(t.charAt(Vt))?(n=t.charAt(Vt),Vt++):(n=w,0===Jt&&p(be));else r=w;return r!==w&&(Lt=e,r=Pe()),Jt--,(e=r)===w&&(r=w,0===Jt&&p(ge)),e}()),Jt--,e===w&&(r=w,0===Jt&&p(we)),e}function y(){var e,r,n;return e=Vt,(r=h())!==w?(37===t.charCodeAt(Vt)?(n=Te,Vt++):(n=w,0===Jt&&p(Fe)),n!==w?(Lt=e,e=r=je(r)):(Vt=e,e=w)):(Vt=e,e=w),e}function v(){var e,r;return Jt++,e=Vt,t.substr(Vt,3)===Ge?(r=Ge,Vt+=3):(r=w,0===Jt&&p(Ue)),r!==w&&(Lt=e,r=Ve()),(e=r)===w&&(e=Vt,t.substr(Vt,4)===Le?(r=Le,Vt+=4):(r=w,0===Jt&&p(De)),r!==w&&(Lt=e,r=He()),(e=r)===w&&(e=Vt,t.substr(Vt,3)===ze?(r=ze,Vt+=3):(r=w,0===Jt&&p(Je)),r!==w&&(Lt=e,r=Be()),(e=r)===w&&(e=Vt,t.substr(Vt,4)===Xe?(r=Xe,Vt+=4):(r=w,0===Jt&&p(Ye)),r!==w&&(Lt=e,r=Qe()),e=r))),Jt--,e===w&&(r=w,0===Jt&&p(qe)),e}function _(){var e,r,n;return Jt++,e=Vt,(r=h())!==w&&(n=g())!==w?(Lt=e,e=r=Ae(r,n)):(Vt=e,e=w),e===w&&(e=Vt,48===t.charCodeAt(Vt)?(r=Ce,Vt++):(r=w,0===Jt&&p(Ie)),r!==w?((n=g())===w&&(n=null),n!==w?(Lt=e,e=r=ke()):(Vt=e,e=w)):(Vt=e,e=w)),Jt--,e===w&&(r=w,0===Jt&&p(Ze)),e}function g(){var e,r;return e=Vt,t.substr(Vt,2)===We?(r=We,Vt+=2):(r=w,0===Jt&&p(Ke)),r!==w&&(Lt=e,r=Ve()),(e=r)===w&&(e=Vt,t.substr(Vt,2)===$e?(r=$e,Vt+=2):(r=w,0===Jt&&p(et)),r!==w&&(Lt=e,r=tt()),(e=r)===w&&(e=Vt,t.substr(Vt,2)===rt?(r=rt,Vt+=2):(r=w,0===Jt&&p(nt)),r!==w&&(Lt=e,r=it()),(e=r)===w&&(e=Vt,81===t.charCodeAt(Vt)?(r=ot,Vt++):(r=w,0===Jt&&p(at)),r!==w&&(Lt=e,r=st()),(e=r)===w&&(e=Vt,t.substr(Vt,2)===ut?(r=ut,Vt+=2):(r=w,0===Jt&&p(pt)),r!==w&&(Lt=e,r=lt()),(e=r)===w&&(e=Vt,t.substr(Vt,2)===ct?(r=ct,Vt+=2):(r=w,0===Jt&&p(dt)),r!==w&&(Lt=e,r=ft()),(e=r)===w&&(e=Vt,t.substr(Vt,2)===ht?(r=ht,Vt+=2):(r=w,0===Jt&&p(yt)),r!==w&&(Lt=e,r=vt()),e=r)))))),e}function m(){var e;return jt.test(t.charAt(Vt))?(e=t.charAt(Vt),Vt++):(e=w,0===Jt&&p(Nt)),e}function b(){var e,r;for(Jt++,e=[],Ct.test(t.charAt(Vt))?(r=t.charAt(Vt),Vt++):(r=w,0===Jt&&p(It));r!==w;)e.push(r),Ct.test(t.charAt(Vt))?(r=t.charAt(Vt),Vt++):(r=w,0===Jt&&p(It));return Jt--,e===w&&(r=w,0===Jt&&p(At)),e}r=void 0!==r?r:{};var P,w={},S={start:c},E=c,R=a("none"),O="none",x=i("none",!1),M=function(){return null},T=a("blur()"),F="blur(",j=i("blur(",!1),N=")",A=i(")",!1),C=function(e){return{type:"blur",radius:e}},I=a("brightness()"),k="brightness(",q=i("brightness(",!1),G=function(e){return{type:"brightness",amount:e}},U=a("contrast()"),V="contrast(",L=i("contrast(",!1),D=function(e){return{type:"contrast",amount:e}},H=a("drop-shadow()"),z="drop-shadow(",J=i("drop-shadow(",!1),B=function(e,t,r,n){return{type:"drop-shadow",offsetX:e,offsetY:t,blurRadius:r,color:n}},X=a("grayscale()"),Y="grayscale(",Q=i("grayscale(",!1),Z=function(e){return{type:"grayscale",amount:e}},W=a("hue-rotate()"),K="hue-rotate(",$=i("hue-rotate(",!1),ee=function(e){return{type:"hue-rotate",angle:e}},te=a("invert()"),re="invert(",ne=i("invert(",!1),ie=function(e){return{type:"invert",amount:e}},oe=a("opacity()"),ae="opacity(",se=i("opacity(",!1),ue=function(e){return{type:"opacity",amount:e}},pe=a("saturate()"),le="saturate(",ce=i("saturate(",!1),de=function(e){return{type:"saturate",amount:e}},fe=a("sepia()"),he="sepia(",ye=i("sepia(",!1),ve=function(e){return{type:"sepia",amount:e}},_e=a("<number-percentage>"),ge=a("<integer>"),me=/^[0-9]/,be=o([["0","9"]],!1,!1),Pe=function(){return parseInt(n(),10)},we=a("<number>"),Se=".",Ee=i(".",!1),Re=function(){return parseFloat(n())},Oe=a("<signedNumber>"),xe=/^[+\-]/,Me=o(["+","-"],!1,!1),Te="%",Fe=i("%",!1),je=function(e){return e/100},Ne=a("<angle>"),Ae=function(e,t){return e*t},Ce="0",Ie=i("0",!1),ke=function(){return 0},qe=a("<unit>"),Ge="deg",Ue=i("deg",!1),Ve=function(){return 1},Le="grad",De=i("grad",!1),He=function(){return.9},ze="rad",Je=i("rad",!1),Be=function(){return 180/Math.PI},Xe="turn",Ye=i("turn",!1),Qe=function(){return 1/360},Ze=a("<length>"),We="px",Ke=i("px",!1),$e="cm",et=i("cm",!1),tt=function(){return 96/2.54},rt="mm",nt=i("mm",!1),it=function(){return 96/2.54/10},ot="Q",at=i("Q",!1),st=function(){return 96/2.54/40},ut="in",pt=i("in",!1),lt=function(){return 96},ct="pc",dt=i("pc",!1),ft=function(){return 16},ht="pt",yt=i("pt",!1),vt=function(){return 96/73},_t="#",gt=i("#",!1),mt=function(e,t,r){return[parseInt(e.join(""),16),parseInt(t.join(""),16),parseInt(r.join(""),16)]},bt=function(e,t,r){return[parseInt([e,e].join(""),16),parseInt([t,t].join(""),16),parseInt([r,r].join(""),16)]},Pt="rgba(",wt=i("rgba(",!1),St=",",Et=i(",",!1),Rt=function(e,t,r,n){return[255*e,255*t,255*r,n]},Ot=function(e,t,r,n){return[e,t,r,n]},xt=function(e,t,r){return[255*e,255*t,255*r,1]},Mt=function(e,t,r){return[e,t,r,1]},Tt="rgb(",Ft=i("rgb(",!1),jt=/^[0-9a-fA-F]/,Nt=o([["0","9"],["a","f"],["A","F"]],!1,!1),At=a("whitespace"),Ct=/^[ \t\n\r]/,It=o([" ","\t","\n","\r"],!1,!1),kt=a("<named-color>"),qt=/^[a-z]/,Gt=o([["a","z"]],!1,!1),Ut=function(){var e=n();return Xt.has(e)||function(e,t){throw l(e,t=void 0!==t?t:u(Lt,Vt))}('unknown color "'+e+'"'),Bt[e].concat(1)},Vt=0,Lt=0,Dt=[{line:1,column:1}],Ht=0,zt=[],Jt=0;if("startRule"in r){if(!(r.startRule in S))throw new Error("Can't start parsing from rule \""+r.startRule+'".');E=S[r.startRule]}var Bt={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},Xt=new Set(Object.keys(Bt));if((P=E())!==w&&Vt===t.length)return P;throw P!==w&&Vt<t.length&&p({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(zt,Ht<t.length?t.charAt(Ht):null,Ht<t.length?u(Ht,Ht+1):u(Ht,Ht))}}}.apply(null,[]))||(e.exports=n)},2179:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(47),r(30),r(197)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}var i;return n(t,e),i=t,t.prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now(),r=t-e;this._currentStep=this._currentStep+r,this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=t}var n=this._currentStep%this.duration/(this.duration/2),i=n<=1?n:2-n,o=this.from.getColorMatrix(),s=this.to.getColorMatrix();return a.mat4.multiplyScalar(o,o,1-i),a.mat4.multiplyScalar(s,s,i),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),a.mat4.add(o,o,s)},t.prototype.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},t.prototype.clone=function(){var e=new i({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r([o.property()],t.prototype,"from",void 0),r([o.property()],t.prototype,"to",void 0),r([o.property({type:Number})],t.prototype,"duration",void 0),r([o.property({type:Boolean})],t.prototype,"repeat",void 0),i=r([o.subclass("esri.views.layers.support.Transition")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},289:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(34),r(362),r(50),r(363)],void 0===(i=function(e,t,n,i,o,a){function s(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var s=a.cacheKey(t,r);void 0!==c[s]?n=c[s]:(null===(n=u(t,r,null))&&(n=new a),c[s]=n)}return p._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function u(e,t,r){void 0===r&&(r=null);var n=p._getTransformation(e,t,r);return null!==n?a.fromGE(n):null}Object.defineProperty(t,"__esModule",{value:!0});var p=null;t.isLoaded=function(){return!!p&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var l=null;t.load=function(){return l||(l=n.create(function(e,t){var n=i.load();r.e(7).then(function(){var o=[r(255)];(function(r){p=r,n.then(function(){p._enableProjection(i),e()},function(e){t(e)})}).apply(null,o)}).catch(r.oe)}))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:s(e,e[0].spatialReference,t,r):s([e],e.spatialReference,t,r)[0]};var c={};t.projectMany=s,t.getTransformation=u,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=p._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];i.push(a.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},362:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(43),r(49),r(34)],void 0===(i=function(e,t,n,i,o){function a(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,d.init(),f.init(),h.init(),y.init(),v.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++){r(o[i].prototype,"getName",function(e){return function(){return e.call(this,new Array(d.PE_NAME_MAX))}})}for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++){r(s[a].prototype,"getParameters",function(e){return function(){for(var r=new Array(d.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}})}r(t._pe.PeHorizon.prototype,"getCoord",function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return l(r,t,e.call(this)),r}}),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}});var u=t._pe._pe_getPeHorizonSize(),p=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+u*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",p),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",p),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=d.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(d.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function s(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function u(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function p(e){var t;return Array.isArray(e[0])?(t=[],e.forEach(function(e){t.push(e[0],e[1])})):t=e,t}function l(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}var c,d,f,h,y,v;Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return c||(c=o.create(function(t,n){Promise.all([r.e(39),r.e(101)]).then(function(){var i=[r(606)];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then(function(e){a(e),t()})}).apply(null,i)}).catch(r.oe)}))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=p(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&l(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=p(n),a=n===o,s=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return u&&l(n,r,s,a),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case d.PE_TRANSFORM_P_TO_G:return n(e,t,i);case d.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(d=t.PeDefs||(t.PeDefs={})),function(e){function r(e,r){var o=null,a=i[e];if(a||(a={},i[e]=a),a.hasOwnProperty(String(r)))o=a[r];else{var s=t._pe.PeFactory.prototype.factoryByType(e,r);t._pe.compare(s,t._pe.NULL)||(o=s,a[r]=o)}return n(o)}function n(e){if(e){var r=e.getType();switch(r){case d.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case d.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case d.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&d.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}var i={},o={};e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return r(d.PE_TYPE_COORDSYS,e)},e.factoryByType=r,e.fromString=function(e,r){var i=null,a=o[e];if(a||(a={},o[e]=a),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,a[r]=i)}return n(i)},e.geogcs=function(e){return r(d.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return r(d.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return r(d.PE_TYPE_PROJCS,e)},e.unit=function(e){return r(d.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var u=null,p=new t._pe.PeInteger(s);try{var l=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,p);if((s=p.val)&&(u=[l],s>1))for(var c=t._pe.getPointer(l),d=1;d<s;d++)u.push(t._pe.wrapPointer(c+r*d,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(p)}return u}}(f=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})).destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];s(i),i.getEntries().forEach(function(e){s(e);var t=e.getGeogtran();s(t),t.getParameters().forEach(s),[t.getGeogcs1(),t.getGeogcs2()].forEach(function(e){s(e);var t=e.getDatum();s(t),s(t.getSpheroid()),s(e.getPrimem()),s(e.getUnit())})})}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(),function(e){(t.PeGTTransformations||(t.PeGTTransformations={})).geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=p(n),s=n===a,u=t._pe.ensureFloat64(a),c=0;i&&(c=t._pe.ensureFloat64(i));var d=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,c,o);return d&&l(n,r,u,s),d}}(),function(e){function r(e,r,n,i,o,a){var s,l;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,l=d.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,l=d.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,l=d.PE_DMS_MAX}var c=0;r&&(c=t._pe.getPointer(r));var f=p(i),h=t._pe.ensureFloat64(f),y=u(n,l),v=s(c,n,h,o,t._pe.ensureInt32(y));if(v)for(var _=0;_<n;_++)a[_]=t._pe.UTF8ToString(y[_]);return v}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var u=i.map(function(e){return t._pe.ensureString(e)}),p=t._pe.ensureInt32(u),c=t._pe.ensureFloat64(new Array(2*n)),d=a(s,n,p,c);return d&&l(o,n,c),d}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=p(n),f=t._pe.ensureFloat64(c),h=u(r,d.PE_MGRS_MAX),y=t._pe.ensureInt32(h),v=t._pe._pe_geog_to_mgrs_extended(l,r,f,i,o,a,y);if(v)for(var _=0;_<r;_++)s[_]=t._pe.UTF8ToString(h[_]);return v},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),p=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_mgrs_to_geog_extended(a,r,u,i,p);return c&&l(o,r,p),c}}(h=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=p(n),f=t._pe.ensureFloat64(c),h=u(r,d.PE_MGRS_MAX),y=t._pe.ensureInt32(h),v=t._pe._pe_geog_to_usng(l,r,f,i,o,a,y);if(v)for(var _=0;_<r;_++)s[_]=t._pe.UTF8ToString(h[_]);return v},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map(function(e){return t._pe.ensureString(e)}),s=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_usng_to_geog(o,r,s,u);return p&&l(i,r,u),p}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=p(n),l=t._pe.ensureFloat64(s),c=u(r,d.PE_UTM_MAX),f=t._pe.ensureInt32(c),h=t._pe._pe_geog_to_utm(a,r,l,i,f);if(h)for(var y=0;y<r;y++)o[y]=t._pe.UTF8ToString(c[y]);return h},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),p=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_utm_to_geog(a,r,u,i,p);return c&&l(o,r,p),c}}(y=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||(a=[],r.set(n,a)),a[i]=o),o}}(v=t.PePCSInfo||(t.PePCSInfo={})),function(e){(t.PeVersion||(t.PeVersion={})).version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(),t._init=a}.apply(null,n))||(e.exports=i)},363:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(364)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=a[o],u=r.fromGE(s);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=i)},364:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},365:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(310),r(207)],void 0===(i=function(e,t,r,n){function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],p=t[6],l=t[7],c=t[8],d=t[9],f=t[10],h=t[11],y=t[12],v=t[13],_=t[14],g=t[15],m=r[0],b=r[1],P=r[2],w=r[3];return e[0]=m*n+b*s+P*c+w*y,e[1]=m*i+b*u+P*d+w*v,e[2]=m*o+b*p+P*f+w*_,e[3]=m*a+b*l+P*h+w*g,m=r[4],b=r[5],P=r[6],w=r[7],e[4]=m*n+b*s+P*c+w*y,e[5]=m*i+b*u+P*d+w*v,e[6]=m*o+b*p+P*f+w*_,e[7]=m*a+b*l+P*h+w*g,m=r[8],b=r[9],P=r[10],w=r[11],e[8]=m*n+b*s+P*c+w*y,e[9]=m*i+b*u+P*d+w*v,e[10]=m*o+b*p+P*f+w*_,e[11]=m*a+b*l+P*h+w*g,m=r[12],b=r[13],P=r[14],w=r[15],e[12]=m*n+b*s+P*c+w*y,e[13]=m*i+b*u+P*d+w*v,e[14]=m*o+b*p+P*f+w*_,e[15]=m*a+b*l+P*h+w*g,e}function a(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,p=o+o,l=n*s,c=n*u,d=n*p,f=i*u,h=i*p,y=o*p,v=a*s,_=a*u,g=a*p;return e[0]=1-(f+y),e[1]=c+g,e[2]=d-_,e[3]=0,e[4]=c-g,e[5]=1-(l+y),e[6]=h+v,e[7]=0,e[8]=d+_,e[9]=h-v,e[10]=1-(l+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,n,i,o,a,s,u,p,l,c,d,f,h,y,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=p,e[9]=l,e[10]=c,e[11]=d,e[12]=f,e[13]=h,e[14]=y,e[15]=v,e},t.identity=i,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],p=t[7],l=t[8],c=t[9],d=t[10],f=t[11],h=t[12],y=t[13],v=t[14],_=t[15],g=r*s-n*a,m=r*u-i*a,b=r*p-o*a,P=n*u-i*s,w=n*p-o*s,S=i*p-o*u,E=l*y-c*h,R=l*v-d*h,O=l*_-f*h,x=c*v-d*y,M=c*_-f*y,T=d*_-f*v,F=g*T-m*M+b*x+P*O-w*R+S*E;return F?(F=1/F,e[0]=(s*T-u*M+p*x)*F,e[1]=(i*M-n*T-o*x)*F,e[2]=(y*S-v*w+_*P)*F,e[3]=(d*w-c*S-f*P)*F,e[4]=(u*O-a*T-p*R)*F,e[5]=(r*T-i*O+o*R)*F,e[6]=(v*b-h*S-_*m)*F,e[7]=(l*S-d*b+f*m)*F,e[8]=(a*M-s*O+p*E)*F,e[9]=(n*O-r*M-o*E)*F,e[10]=(h*w-y*b+_*g)*F,e[11]=(c*b-l*w-f*g)*F,e[12]=(s*R-a*x-u*E)*F,e[13]=(r*x-n*R+i*E)*F,e[14]=(y*m-h*P-v*g)*F,e[15]=(l*P-c*m+d*g)*F,e):null},t.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],p=t[7],l=t[8],c=t[9],d=t[10],f=t[11],h=t[12],y=t[13],v=t[14],_=t[15];return e[0]=s*(d*_-f*v)-c*(u*_-p*v)+y*(u*f-p*d),e[1]=-(n*(d*_-f*v)-c*(i*_-o*v)+y*(i*f-o*d)),e[2]=n*(u*_-p*v)-s*(i*_-o*v)+y*(i*p-o*u),e[3]=-(n*(u*f-p*d)-s*(i*f-o*d)+c*(i*p-o*u)),e[4]=-(a*(d*_-f*v)-l*(u*_-p*v)+h*(u*f-p*d)),e[5]=r*(d*_-f*v)-l*(i*_-o*v)+h*(i*f-o*d),e[6]=-(r*(u*_-p*v)-a*(i*_-o*v)+h*(i*p-o*u)),e[7]=r*(u*f-p*d)-a*(i*f-o*d)+l*(i*p-o*u),e[8]=a*(c*_-f*y)-l*(s*_-p*y)+h*(s*f-p*c),e[9]=-(r*(c*_-f*y)-l*(n*_-o*y)+h*(n*f-o*c)),e[10]=r*(s*_-p*y)-a*(n*_-o*y)+h*(n*p-o*s),e[11]=-(r*(s*f-p*c)-a*(n*f-o*c)+l*(n*p-o*s)),e[12]=-(a*(c*v-d*y)-l*(s*v-u*y)+h*(s*d-u*c)),e[13]=r*(c*v-d*y)-l*(n*v-i*y)+h*(n*d-i*c),e[14]=-(r*(s*v-u*y)-a*(n*v-i*y)+h*(n*u-i*s)),e[15]=r*(s*d-u*c)-a*(n*d-i*c)+l*(n*u-i*s),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],p=e[8],l=e[9],c=e[10],d=e[11],f=e[12],h=e[13],y=e[14],v=e[15];return(t*a-r*o)*(c*v-d*y)-(t*s-n*o)*(l*v-d*h)+(t*u-i*o)*(l*y-c*h)+(r*s-n*a)*(p*v-d*f)-(r*u-i*a)*(p*y-c*f)+(n*u-i*s)*(p*h-l*f)},t.multiply=o,t.translate=function(e,t,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,p=void 0,l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,y=void 0,v=void 0,_=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],p=t[3],l=t[4],c=t[5],d=t[6],f=t[7],h=t[8],y=t[9],v=t[10],_=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=p,e[4]=l,e[5]=c,e[6]=d,e[7]=f,e[8]=h,e[9]=y,e[10]=v,e[11]=_,e[12]=a*n+l*i+h*o+t[12],e[13]=s*n+c*i+y*o+t[13],e[14]=u*n+d*i+v*o+t[14],e[15]=p*n+f*i+_*o+t[15]),e},t.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,i){var o=i[0],a=i[1],s=i[2],u=Math.sqrt(o*o+a*a+s*s),p=void 0,l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,y=void 0,v=void 0,_=void 0,g=void 0,m=void 0,b=void 0,P=void 0,w=void 0,S=void 0,E=void 0,R=void 0,O=void 0,x=void 0,M=void 0,T=void 0,F=void 0,j=void 0,N=void 0;return u<n.EPSILON?null:(o*=u=1/u,a*=u,s*=u,p=Math.sin(r),c=1-(l=Math.cos(r)),d=t[0],f=t[1],h=t[2],y=t[3],v=t[4],_=t[5],g=t[6],m=t[7],b=t[8],P=t[9],w=t[10],S=t[11],E=o*o*c+l,R=a*o*c+s*p,O=s*o*c-a*p,x=o*a*c-s*p,M=a*a*c+l,T=s*a*c+o*p,F=o*s*c+a*p,j=a*s*c-o*p,N=s*s*c+l,e[0]=d*E+v*R+b*O,e[1]=f*E+_*R+P*O,e[2]=h*E+g*R+w*O,e[3]=y*E+m*R+S*O,e[4]=d*x+v*M+b*T,e[5]=f*x+_*M+P*T,e[6]=h*x+g*M+w*T,e[7]=y*x+m*M+S*T,e[8]=d*F+v*j+b*N,e[9]=f*F+_*j+P*N,e[10]=h*F+g*j+w*N,e[11]=y*F+m*j+S*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],p=t[8],l=t[9],c=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+p*n,e[5]=a*i+l*n,e[6]=s*i+c*n,e[7]=u*i+d*n,e[8]=p*i-o*n,e[9]=l*i-a*n,e[10]=c*i-s*n,e[11]=d*i-u*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],p=t[8],l=t[9],c=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-p*n,e[1]=a*i-l*n,e[2]=s*i-c*n,e[3]=u*i-d*n,e[8]=o*n+p*i,e[9]=a*n+l*i,e[10]=s*n+c*i,e[11]=u*n+d*i,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],p=t[4],l=t[5],c=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+p*n,e[1]=a*i+l*n,e[2]=s*i+c*n,e[3]=u*i+d*n,e[4]=p*i-o*n,e[5]=l*i-a*n,e[6]=c*i-s*n,e[7]=d*i-u*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var i=r[0],o=r[1],a=r[2],s=Math.sqrt(i*i+o*o+a*a),u=void 0,p=void 0,l=void 0;return s<n.EPSILON?null:(i*=s=1/s,o*=s,a*=s,u=Math.sin(t),l=1-(p=Math.cos(t)),e[0]=i*i*l+p,e[1]=o*i*l+a*u,e[2]=a*i*l-o*u,e[3]=0,e[4]=i*o*l-a*u,e[5]=o*o*l+p,e[6]=a*o*l+i*u,e[7]=0,e[8]=i*a*l+o*u,e[9]=o*a*l-i*u,e[10]=a*a*l+p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var r=u,n=-t[0],i=-t[1],o=-t[2],s=t[3],p=t[4],l=t[5],c=t[6],d=t[7],f=n*n+i*i+o*o+s*s;return f>0?(r[0]=2*(p*s+d*n+l*o-c*i)/f,r[1]=2*(l*s+d*i+c*n-p*o)/f,r[2]=2*(c*s+d*o+p*i-l*n)/f):(r[0]=2*(p*s+d*n+l*o-c*i),r[1]=2*(l*s+d*i+c*n-p*o),r[2]=2*(c*s+d*o+p*i-l*n)),a(e,t,r),e};var u=r.create();t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],p=t[9],l=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+p*p+l*l),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},t.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,p=o+o,l=a+a,c=i*u,d=i*p,f=i*l,h=o*p,y=o*l,v=a*l,_=s*u,g=s*p,m=s*l,b=n[0],P=n[1],w=n[2];return e[0]=(1-(h+v))*b,e[1]=(d+m)*b,e[2]=(f-g)*b,e[3]=0,e[4]=(d-m)*P,e[5]=(1-(c+v))*P,e[6]=(y+_)*P,e[7]=0,e[8]=(f+g)*w,e[9]=(y-_)*w,e[10]=(1-(c+h))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],p=o+o,l=a+a,c=s+s,d=o*p,f=o*l,h=o*c,y=a*l,v=a*c,_=s*c,g=u*p,m=u*l,b=u*c,P=n[0],w=n[1],S=n[2],E=i[0],R=i[1],O=i[2],x=(1-(y+_))*P,M=(f+b)*P,T=(h-m)*P,F=(f-b)*w,j=(1-(d+_))*w,N=(v+g)*w,A=(h+m)*S,C=(v-g)*S,I=(1-(d+y))*S;return e[0]=x,e[1]=M,e[2]=T,e[3]=0,e[4]=F,e[5]=j,e[6]=N,e[7]=0,e[8]=A,e[9]=C,e[10]=I,e[11]=0,e[12]=r[0]+E-(x*E+F*R+A*O),e[13]=r[1]+R-(M*E+j*R+C*O),e[14]=r[2]+O-(T*E+N*R+I*O),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,p=r*a,l=n*a,c=n*s,d=i*a,f=i*s,h=i*u,y=o*a,v=o*s,_=o*u;return e[0]=1-c-h,e[1]=l+_,e[2]=d-v,e[3]=0,e[4]=l-_,e[5]=1-p-h,e[6]=f+y,e[7]=0,e[8]=d+v,e[9]=f-y,e[10]=1-p-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),p=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*p,e[15]=0,e},t.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},t.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),p=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*p*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),p=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*p,e[15]=1,e},t.lookAt=function(e,t,r,o){var a=void 0,s=void 0,u=void 0,p=void 0,l=void 0,c=void 0,d=void 0,f=void 0,h=void 0,y=void 0,v=t[0],_=t[1],g=t[2],m=o[0],b=o[1],P=o[2],w=r[0],S=r[1],E=r[2];return Math.abs(v-w)<n.EPSILON&&Math.abs(_-S)<n.EPSILON&&Math.abs(g-E)<n.EPSILON?i(e):(d=v-w,f=_-S,h=g-E,a=b*(h*=y=1/Math.sqrt(d*d+f*f+h*h))-P*(f*=y),s=P*(d*=y)-m*h,u=m*f-b*d,(y=Math.sqrt(a*a+s*s+u*u))?(a*=y=1/y,s*=y,u*=y):(a=0,s=0,u=0),p=f*u-h*s,l=h*a-d*u,c=d*s-f*a,(y=Math.sqrt(p*p+l*l+c*c))?(p*=y=1/y,l*=y,c*=y):(p=0,l=0,c=0),e[0]=a,e[1]=p,e[2]=d,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=u,e[9]=c,e[10]=h,e[11]=0,e[12]=-(a*v+s*_+u*g),e[13]=-(p*v+l*_+c*g),e[14]=-(d*v+f*_+h*g),e[15]=1,e)},t.targetTo=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],p=n[2],l=i-r[0],c=o-r[1],d=a-r[2],f=l*l+c*c+d*d;f>0&&(l*=f=1/Math.sqrt(f),c*=f,d*=f);var h=u*d-p*c,y=p*l-s*d,v=s*c-u*l;return(f=h*h+y*y+v*v)>0&&(h*=f=1/Math.sqrt(f),y*=f,v*=f),e[0]=h,e[1]=y,e[2]=v,e[3]=0,e[4]=c*v-d*y,e[5]=d*h-l*v,e[6]=l*y-c*h,e[7]=0,e[8]=l,e[9]=c,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],p=e[6],l=e[7],c=e[8],d=e[9],f=e[10],h=e[11],y=e[12],v=e[13],_=e[14],g=e[15],m=t[0],b=t[1],P=t[2],w=t[3],S=t[4],E=t[5],R=t[6],O=t[7],x=t[8],M=t[9],T=t[10],F=t[11],j=t[12],N=t[13],A=t[14],C=t[15];return Math.abs(r-m)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-b)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-P)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(a-w)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-E)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(p-R)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(l-O)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-x)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-M)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(f-T)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-F)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(y-j)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(j))&&Math.abs(v-N)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(_-A)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(A))&&Math.abs(g-C)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))},t.mul=o,t.sub=s}.apply(null,n))||(e.exports=i)},385:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(43),r(28),r(54)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=function(e,t,r){var n=r.get("state.resolution"),o=t*("number"==typeof n?n:1),a=e.clone().offset(-o,-o),s=e.clone().offset(o,o),u=r.spatialReference;return new i({xmin:Math.min(a.x,s.x),ymin:Math.min(a.y,s.y),xmax:Math.max(a.x,s.x),ymax:Math.max(a.y,s.y),spatialReference:u})}}.apply(null,n))||(e.exports=i)},386:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}function i(e,t){if(!t)return e;var r=t.filter(function(e){return"size"===e.type}).map(function(t){var r=t.maxSize,i=t.minSize;return(n(r,e)+n(i,e))/2}),i=0,o=r.length;if(0===o)return e;for(var a=0;a<o;a++)i+=r[a];var s=Math.floor(i/o);return Math.max(s,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;var t="visualVariables"in e?i(6,e.visualVariables):6;if("simple"===e.type)return r(t,e.symbol);if("unique-value"===e.type){var n=t;return e.uniqueValueInfos.forEach(function(e){n=r(n,e.symbol)}),n}if("class-breaks"===e.type){var o=t;return e.classBreakInfos.forEach(function(e){o=r(o,e.symbol)}),o}return e.type,t}}.apply(null,n))||(e.exports=i)},387:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(35),r(42),r(97),r(107),r(41),r(33),r(38),r(30),r(46),r(74)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d,f){var h=new u.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y=new u.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.where=null,r.geometry=null,r.spatialRelationship="intersects",r.hiddenIds=new Set,r.distance=void 0,r.objectIds=null,r.units=null,r.timeExtent=null,r.enabled=!1,r}var u;return n(t,e),u=t,t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.enable=function(){this._set("enabled",!0)},t.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,r=t.where,n=t.geometry,o=t.spatialRelationship,a=t.timeExtent,s=t.objectIds,u=t.units,p=t.distance;return new f(i({geometry:l.clone(n),objectIds:l.clone(s),spatialRelationship:o,timeExtent:l.clone(a),where:r,units:u,distance:p},e))},t.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,n=e.spatialRelationship,i=e.hiddenIds,o=e.timeExtent,a=e.objectIds,s=e.units,p=e.distance,c=new Set;return i.forEach(function(e){return c.add(e)}),new u({geometry:l.clone(r),hiddenIds:c,objectIds:l.clone(a),spatialRelationship:n,timeExtent:l.clone(o),where:t,units:s,distance:p})},r([c.property({type:String})],t.prototype,"where",void 0),r([c.writer("where")],t.prototype,"writeWhere",null),r([c.property({types:o.geometryTypes,json:{read:d.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r([c.property({type:String,json:{read:{source:"spatialRel",reader:h.read},write:{target:"spatialRel",writer:h.write}}})],t.prototype,"spatialRelationship",void 0),r([c.property({json:{write:function(e,t,r){return t[r]=s.valuesOfSet(e)},read:function(e){return s.createSetFromValues(e)}}})],t.prototype,"hiddenIds",void 0),r([c.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),r([c.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r([c.property({type:String,json:{read:y.read,write:{writer:y.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),r([c.property({type:a,json:{write:!0}})],t.prototype,"timeExtent",void 0),r([c.property({readOnly:!0})],t.prototype,"enabled",void 0),u=r([c.subclass("esri.views.layers.support.FeatureFilter")],t)}(c.declared(p.JSONSupport))}.apply(null,n))||(e.exports=i)},57:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(33),r(30)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([o.subclass("esri.views.layers.support.ClipArea")],t)}(o.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},603:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(203),r(40),r(65)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),n(this,void 0,void 0,function(){var n,s,u,p,l,c,d,f,h,y,v;return r(this,function(r){switch(r.label){case 0:return o.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return n=r.sent(),s=t.lastEditInfoEnabled,u=e.objectIdField,p=e.typeIdField,l=e.globalIdField,i.includes(n,"*")?[2,["*"]]:(d=a.fixFields,f=[e.fields],y=(h=n).concat,(v=s)?[4,a.getFeatureEditFields(e)]:[3,3]);case 2:v=r.sent(),r.label=3;case 3:return c=d.apply(void 0,f.concat([y.apply(h,[v||null])])),p&&c.push(p),c&&u&&a.hasField(e.fields,u)&&-1===c.indexOf(u)&&c.push(u),c&&l&&a.hasField(e.fields,l)&&-1===c.indexOf(l)&&c.push(l),[2,c]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:o.isSome(t)&&t.defaultPopupTemplateEnabled&&o.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,n))||(e.exports=i)},74:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(42),r(42),r(71),r(97),r(41),r(33),r(38),r(30),r(48),r(46),r(80),r(85),r(93)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d,f,h,y,v){var _=new u.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g=new u.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cacheHint=!1,r.datumTransformation=null,r.distance=void 0,r.gdbVersion=null,r.geometry=null,r.geometryPrecision=void 0,r.groupByFieldsForStatistics=null,r.having=null,r.historicMoment=null,r.maxAllowableOffset=void 0,r.maxRecordCountFactor=1,r.multipatchOption=null,r.num=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.outStatistics=null,r.parameterValues=null,r.pixelSize=null,r.quantizationParameters=null,r.rangeValues=null,r.relationParameter=null,r.resultType=null,r.returnCentroid=!1,r.returnDistinctValues=!1,r.returnExceededLimitFeatures=!0,r.returnGeometry=!1,r.returnQueryGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.source=null,r.spatialRelationship="intersects",r.start=void 0,r.sqlFormat=null,r.text=null,r.timeExtent=null,r.units=null,r.where=null,r}var u;return r(t,e),u=t,t.from=function(e){return d.ensureClass(u,e)},t.prototype.castDatumTransformation=function(e){return"number"==typeof e||"object"==typeof e?e:null},t.prototype.writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.writeParameterValues=function(e,t){if(e){var r={};for(var n in e){var i=e[n];Array.isArray(i)?r[n]=i.map(function(e){return e instanceof Date?e.getTime():e}):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}},t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"},t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.clone=function(){return new u(l.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))},t.MAX_MAX_RECORD_COUNT_FACTOR=5,n([c.property({type:Boolean,json:{write:!0,default:!1}})],t.prototype,"cacheHint",void 0),n([c.property({json:{write:!0}})],t.prototype,"datumTransformation",void 0),n([c.cast("datumTransformation")],t.prototype,"castDatumTransformation",null),n([c.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),n([c.property({types:o.geometryTypes,json:{read:f.fromJSON,write:!0}})],t.prototype,"geometry",void 0),n([c.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),n([c.property({type:[String],json:{write:!0}})],t.prototype,"groupByFieldsForStatistics",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"having",void 0),n([c.property({type:Date})],t.prototype,"historicMoment",void 0),n([c.writer("historicMoment")],t.prototype,"writeHistoricMoment",null),n([c.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),n([c.property({type:Number,cast:function(e){return e<1?1:e>u.MAX_MAX_RECORD_COUNT_FACTOR?u.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],t.prototype,"maxRecordCountFactor",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"multipatchOption",void 0),n([c.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),n([c.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([c.property({type:[String],json:{write:!0}})],t.prototype,"orderByFields",void 0),n([c.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),n([c.property({type:i.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),n([c.property({type:[v],json:{write:!0}})],t.prototype,"outStatistics",void 0),n([c.property({json:{write:!0}})],t.prototype,"parameterValues",void 0),n([c.writer("parameterValues")],t.prototype,"writeParameterValues",null),n([c.property({types:a.symbolTypes,json:{read:h.read,write:!0}})],t.prototype,"pixelSize",void 0),n([c.property({type:y.default,json:{write:!0}})],t.prototype,"quantizationParameters",void 0),n([c.property({type:[Object],json:{write:!0}})],t.prototype,"rangeValues",void 0),n([c.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],t.prototype,"relationParameter",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"resultType",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnCentroid",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnDistinctValues",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:!e}}}}})],t.prototype,"returnExceededLimitFeatures",void 0),n([c.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnQueryGeometry",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnM",void 0),n([c.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnZ",void 0),n([c.property({json:{write:!0}})],t.prototype,"source",void 0),n([c.property({type:String,json:{read:{source:"spatialRel",reader:_.read},write:{target:"spatialRel",writer:_.write}}})],t.prototype,"spatialRelationship",void 0),n([c.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),n([c.writer("start"),c.writer("num")],t.prototype,"writeStart",null),n([c.property({type:String,json:{write:!0}})],t.prototype,"sqlFormat",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([c.property({type:s,json:{write:!0}})],t.prototype,"timeExtent",void 0),n([c.property({type:String,json:{read:g.read,write:{writer:g.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),n([c.property({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],t.prototype,"where",void 0),n([c.writer("where")],t.prototype,"writeWhere",null),u=n([c.subclass("esri.tasks.support.Query")],t)}(c.declared(p.JSONSupport))}.apply(null,n))||(e.exports=i)},78:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(41),r(33),r(30),r(48),r(169),r(170)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p){var l=new i.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(e){function t(t){var r=e.call(this,t)||this;return r.alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r}var i;return r(t,e),i=t,t.prototype.readDescription=function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(e){}return r?r.value:null},t.prototype.readValueType=function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(e){}return r?l.fromJSON(r.fieldValueType):null},t.prototype.clone=function(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})},n([a.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),n([a.property({type:[String,Number],json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),n([a.property()],t.prototype,"description",void 0),n([a.reader("description")],t.prototype,"readDescription",null),n([a.property({types:u.types,json:{read:{reader:u.fromJSON},write:!0}})],t.prototype,"domain",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),n([a.property({type:s.Integer,json:{write:!0}})],t.prototype,"length",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),n([a.enumeration.serializable()(p.kebabDict)],t.prototype,"type",void 0),n([a.property()],t.prototype,"valueType",void 0),n([a.reader("valueType",["description"])],t.prototype,"readValueType",null),i=n([a.subclass("esri.layers.support.Field")],t)}(a.declared(o.JSONSupport))}.apply(null,n))||(e.exports=i)},819:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(83),r(35),r(31),r(32),r(2173),r(42),r(77),r(136),r(55),r(36),r(49),r(107),r(37),r(40),r(34),r(56),r(30),r(163),r(386),r(100),r(74),r(98),r(149),r(2174),r(820),r(518),r(2175),r(385),r(821),r(344),r(2176),r(144),r(264),r(387),r(822)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,d,f,h,y,v,_,g,m,b,P,w,S,E,R,O,x,M,T,F,j,N,A,C,I,k,q,G){var U=v.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!0,t._updatingPipelineConfig=!1,t._viewStateId=-1,t._visibilityOverrides=new Set,t._effect=null,t._highlightIds=new Map,t._onGoingEdits=0,t.container=new R.Container,t.filter=null,t.doRefresh=g.debounce(function(){return t._onGoingEdits=0,t._proxy.refresh().catch(function(e){g.isAbortError(e)||U.error(e)})}),t._onRenderingConfigChange=g.debounce(function(){return s(t,void 0,void 0,function(){var e,t,r,n,i,o,s,u,p,l,c,d,f,h,v,g,m;return a(this,function(a){switch(a.label){case 0:return this._hasRequiredSupport(this.layer)?(this._set("_updatingPipelineConfig",!0),[4,this._effectiveRendererPromise]):[2];case 1:return e=a.sent(),t=e.renderer,r=e.aggregateFields,n=e.featureReduction,[4,this._updateRequiredFields()];case 2:return a.sent(),i=this.availableFields.join("."),o=this._createLayerFilterHash(),s=this._createTileRendererHash(t),u=this._createFeatureDataHash(t),p=this._createMeshHash(t),l=i!==this._clientDataHash,c=o!==this._layerFilterHash,d=u!==this._featureDataHash||l,f=d&&!!this.layer.featureReduction,h=p!==this._meshHash||f,v={invalidateFeatureData:d,invalidateMesh:h,layerFilterChanged:c},g=this._createConfiguration(t,r,n),s===this._tileRendererHash?[3,9]:[4,this._initTileRenderer(t)];case 3:return a.sent(),[4,this._createServiceOptions()];case 4:return m=a.sent(),this.effects.forEach(function(e){return _.isSome(e)&&_.isSome(e.filter)&&e.filter.enable()}),this.tileRenderer.onConfigUpdate(t),[4,this._proxy.startup(this.view.featuresTilingScheme,g,m,v)];case 5:return a.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]:[3,7];case 6:a.sent(),a.label=7;case 7:return[4,this._onceTilesUpdated()];case 8:return a.sent(),this.tileRenderer.onConfigUpdate(t),[3,14];case 9:return this._lockAttributeTextureUpload(),l||c||d||h?[4,this._proxy.update(g,v)]:[3,11];case 10:a.sent(),a.label=11;case 11:return c?[4,this._onceTilesUpdated()]:[3,13];case 12:a.sent(),a.label=13;case 13:this._unlockAttributeTextureUpload(),this.effects.forEach(function(e){return _.isSome(e)&&_.isSome(e.filter)&&e.filter.enable()}),this.tileRenderer.onConfigUpdate(t),this._forceAttributeTextureUpload(),a.label=14;case 14:return this._clientDataHash=i,this._layerFilterHash=o,this._tileRendererHash=s,this._meshHash=p,this._featureDataHash=u,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}})})}),t._updateHighlight=g.debounce(function(){return s(t,void 0,void 0,function(){return a(this,function(e){return[2,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]})})}),t}return r(t,e),t.prototype.destroy=function(){this._proxy.destroy(),_.andThen(this._updateClusterSizeTask,function(e){return e.remove()})},t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this._initProxy()),this.handles.add([this.clips.on("change",function(){return e.tileRenderer&&e.tileRenderer.onConfigUpdate(e._effectiveRenderer)}),this.on("valueRangesChanged",function(t){e._set("_aggregateValueRanges",t.valueRanges)})])},t.prototype._initProxy=function(){return s(this,void 0,void 0,function(){var e,t,r;return a(this,function(n){if(this.layer.isTable)throw new f("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});if(e=this.layer.spatialReference,t=p.SpatialReference.WGS84,this.layer.featureReduction&&!P.doesBrowserSupportProjection(e,t))throw new f("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:e,outSpatialReference:t});return this._proxy&&this._proxy.destroy(),r=this._createClientOptions(),this._set("_proxy",new F.default({client:r})),[2,this._proxy.when()]})})},Object.defineProperty(t.prototype,"_effectiveRendererPromise",{get:function(){var e=this,t=this._getEffectiveRenderer();return t.then(function(t){var r=t.renderer;return e._set("_effectiveRenderer",r)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return _.unwrapOr(this._effect,null)},set:function(e){var t=this._effect;_.isSome(t)&&_.isSome(t.filter)&&t.filter.enabled&&_.isSome(e)&&_.isSome(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this.attached&&this._tileStrategy.tiles.forEach(function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,n=t.renderer,i=t.labelingInfo,o="feature"===this.layer.type?this.layer.gdbVersion:void 0,a="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=this.timeExtent,u="filter"in this.layer&&this.layer.filter&&""+JSON.stringify(this.layer.filter.geometry)+this.layer.filter.where,p=JSON.stringify(this.clips),l=this.layer.featureReduction&&this.layer.featureReduction.toJSON();return JSON.stringify({filterHash:_.isSome(this.filter)&&this.filter.toJSON(),effectHash:_.isSome(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:a,availableFields:e,renderer:n,labelingInfo:i,timeExtent:s,clipsHash:p,featureReduction:l})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e){var t,r=this;return e instanceof l?t=[e.getObjectId()]:"number"==typeof e?t=[e]:d.isCollection(e)?t=e.map(function(e){return e&&e.getAttribute(r.layer.objectIdField)}).toArray():Array.isArray(e)&&e.length>0&&(t="number"==typeof e[0]?e:e.map(function(e){return e&&e.getAttribute(r.layer.objectIdField)})),t&&t.length?(t=t.filter(function(e){return null!=e}),this._addHighlight(t),{remove:function(){return r._removeHighlight(t)},pause:function(){return r._removeHighlight(t)},resume:function(){return r._addHighlight(t)}}):{remove:function(){},pause:function(){},resume:function(){}}},t.prototype.hasHighlight=function(){return!!this._highlightIds.size},t.prototype.hitTest=function(e,t){return this._hitTest(e,t)},t.prototype.queryStatistics=function(){return this._proxy.queryStatistics()},t.prototype.queryFeatures=function(e,t){var r=this;return this.queryFeaturesJSON(e,t).then(function(e){var t=S.fromJSON(e);return t.features.forEach(function(e){e.layer=r.layer,e.sourceLayer=r.layer}),t})},t.prototype.queryFeaturesJSON=function(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)},t.prototype.queryObjectIds=function(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)},t.prototype.queryFeatureCount=function(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)},t.prototype.queryExtent=function(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then(function(e){return{count:e.count,extent:p.Extent.fromJSON(e.extent)}})},t.prototype.setVisibility=function(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._renderingConfigHashChanged()},t.prototype.update=function(e){if(this.attached&&this._tileStrategy&&this.tileRenderer){this._tileStrategy.update(e)||this.requestUpdate();var t=e.state;this._viewStateId!==t.id&&(this._proxy.setViewState(t),this._viewStateId=t.id),this.notifyChange("numFeatures"),this.notifyChange("updating")}},t.prototype.attach=function(){var e=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach"),this._tileStrategy=new A({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add([this.layer.on("edits",function(t){return s(e,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this._onGoingEdits++,[4,this._proxy.onEdits(t)];case 1:return e.sent(),this._onGoingEdits=Math.max(0,this._onGoingEdits-1),[2]}})})}),m.init(this,"renderingConfigHash",function(){return e._renderingConfigHashChanged()},!0)],"attach")},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.fetchPopupFeatures=function(e,t){return s(this,void 0,void 0,function(){var r,n,i,o;return a(this,function(a){return _.isSome(t)&&t.clientGraphics.length&&(r=t.clientGraphics[0])instanceof u?[2,[r]]:(n=this.validateFetchPopupFeatures(t))?[2,g.reject(n)]:_.isSome(t)&&0===t.clientGraphics.length?[2,g.resolve([])]:(i=this.fetchClientPopupFeatures(t),e?(o=this._fetchServicePopupFeatures(e,t),[2,g.eachAlwaysValues([i,o]).then(c.flatten)]):[2,i])})})},t.prototype._fetchServicePopupFeatures=function(e,t){return s(this,void 0,void 0,function(){var r,n,i,o,s,u,p,l,c,d;return a(this,function(a){switch(a.label){case 0:return[4,this.createPopupQuery(t)];case 1:if(r=a.sent(),n=this.layer,i=n.renderer,o=w.calculateTolerance(i),r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o),s=new Set,u=n.objectIdField,p=_.isSome(t)?t.clientGraphics:null)for(l=0,c=p;l<c.length;l++)d=c[l],s.add(d.attributes[u]);return[2,n.queryFeatures(r).then(function(e){return e.features.filter(function(e){return!s.has(e.attributes[u])})})]}})})},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return j.createQueryGeometry(e,t,this.view)},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)},t.prototype._createClientOptions=function(){var e=this;return{setUpdating:function(t){e._set("_pipelineIsUpdating",t)},emitEvent:function(t){e.emit(t.name,t.event)}}},t.prototype._createServiceOptions=function(){return s(this,void 0,void 0,function(){var e,t,r,n,i,o,s,u,p;return a(this,function(a){switch(a.label){case 0:return e=this.layer,t=e.capabilities,r=e.objectIdField,n=e.fields.map(function(e){return e.toJSON()}),i=e.fullExtent&&e.fullExtent.toJSON(),o=N.toJSONGeometryType(e.geometryType),s=e.timeInfo&&e.timeInfo.toJSON()||null,function(e){return e&&"openPorts"in e}(e.source)?[4,e.source.openPorts()]:[3,2];case 1:return p=a.sent(),[3,3];case 2:p="dynamicDataSource"in e?e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId:e.parsedUrl,a.label=3;case 3:return u=p,[2,{type:"on-demand",maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:n,fullExtent:i,geometryType:o,objectIdField:r,source:u,timeInfo:s}]}})})},t.prototype._createMemoryServiceOptions=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:return[4,e.openPorts()];case 1:return t=r.sent(),[2,o({},this._createServiceOptions(),{type:"memory",source:t})]}})})},t.prototype._cleanUpQuery=function(e){var t=E.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._createUpdateClusterSizeTask=function(e,t){var r=this;return this.watch("_aggregateValueRanges",function(n){return s(r,void 0,void 0,function(){return a(this,function(r){return this._updateClusterEffectiveRendererSizeVariable(e,t,n),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer),[2]})})})},t.prototype._updateClusterEffectiveRendererSizeVariable=function(e,t,r){return s(this,void 0,void 0,function(){var n,i;return a(this,function(o){return"visualVariables"in e&&e.visualVariables&&(n=T.findSizeVV(e.visualVariables),_.isSome(n)&&"cluster_count"===n.field&&(i=e.visualVariables.indexOf(n),e.visualVariables[i]=T.createClusterCountSizeVariable(t,r),this._set("_effectiveRenderer",e.clone()))),[2]})})},t.prototype._getEffectiveRenderer=function(){return s(this,void 0,void 0,function(){var e,t,r,n,i;return a(this,function(o){switch(o.label){case 0:return e=this.layer.renderer,t=this.layer.featureReduction,_.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&"cluster"===t.type&&T.isClusterCompatibleRenderer(e)?(r=t,n=[],[4,T.createClusterRenderer(n,this.layer.fields,e,r,this._aggregateValueRanges)]):[3,2];case 1:return i=o.sent(),_.andThen(this._updateClusterSizeTask,function(e){return e.remove()}),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(i,r),[2,{renderer:i,aggregateFields:n,featureReduction:t}];case 2:return[2,{renderer:e,aggregateFields:[],featureReduction:null}]}})})},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",function(){t.requestUpdate()}),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._initTileRenderer=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:return[4,x.createOrReuseTileRenderer(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return t=r.sent(),this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this._proxy.tileRenderer=t,this._set("tileRenderer",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),[2,this.tileRenderer]}})})},t.prototype._createLayerFilterHash=function(){return this.layer.definitionExpression+"."+("feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0)+"."+("feature"===this.layer.type?this.layer.gdbVersion:void 0)},t.prototype._createTileRendererHash=function(e){return("heatmap"===e.type?"heatmap":"symbol")+"."+("dot-density"===e.type)},t.prototype._createFeatureDataHash=function(e){var t=e.getAttributeHash(),r=JSON.stringify(this.filter),n=_.isSome(this.effect)&&JSON.stringify(this.effect.filter),i=JSON.stringify(this.timeExtent),o="";return this._visibilityOverrides.forEach(function(e){return o+=e}),t+"."+r+"."+n+"."+i+"."+o},t.prototype._createMeshHash=function(e){var t=R.getVVFlags("visualVariables"in e&&e.visualVariables||[]),r=this.layer.labelingInfo&&this.layer.labelingInfo.map(function(e){return JSON.stringify(e)}).join("/"),n=JSON.stringify(this.layer.featureReduction);return e.getMeshHash()+"."+t+"."+r+"."+n},t.prototype._injectOverrides=function(e){var t=this.filter&&this.filter.timeExtent,r=this.timeExtent&&t?this.timeExtent.intersection(t):this.timeExtent||t;if(!this._visibilityOverrides.size&&!r)return e;var n=_.isSome(this.filter)&&this.filter.clone()||new q;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=r,n},t.prototype._createConfiguration=function(e,t,r){var n=M.simplifyVVRenderer(e),i=this.layer.labelingInfo,o="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,a="feature"===this.layer.type?this.layer.gdbVersion:void 0,s=new Array(R.definitions.MAX_FILTERS),u=this._injectOverrides(this.filter);return s[0]=_.isSome(u)&&u.toJSON()||null,s[1]=_.isSome(this.effect)&&this.effect.filter&&this.effect.filter.toJSON()||null,{featureReduction:_.andThen(r,function(e){return e.toJSON()}),definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:i&&i.map(function(e){return e.toJSON()}),renderer:n.toJSON(),gdbVersion:a,historicMoment:o,devicePixelRatio:window.devicePixelRatio||1,filters:s,aggregateFields:t}},t.prototype._hasRequiredSupport=function(e){return!("dot-density"===e.renderer.type&&!h("esri-webgl-texture-float")&&(U.error(new f("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),1))},t.prototype._onceTilesUpdated=function(){return this.requestUpdate(),m.whenFalseOnce(this,"_pipelineIsUpdating",!0)},t.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()},t.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.unlockAttributeTextureUpload()},t.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()},t.prototype._renderingConfigHashChanged=function(){var e=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var t=this._onRenderingConfigChange();this._updatingPromise=t;var r=function(){t===e._updatingPromise&&e._set("_updatingPipelineConfig",!1),e.view.timeline.end(e.layer.title+" (FeatureLayer) Initial Pipeline Config")};t.then(r).catch(function(e){g.isAbortError(e)||U.error(e),r()})},t.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(this._highlightIds.has(n)){var i=this._highlightIds.get(n);this._highlightIds.set(n,i+1)}else this._highlightIds.set(n,1)}this._updateHighlight().catch(function(e){g.isAbortError(e)||U.error(e)})},t.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(this._highlightIds.has(n)){var i=this._highlightIds.get(n)-1;0===i?this._highlightIds.delete(n):this._highlightIds.set(n,i)}}this._updateHighlight().catch(function(e){g.isAbortError(e)||U.error(e)})},t.prototype._createHittestResult=function(e){return e.layer=this.layer,e.sourceLayer=this.layer,_.isSome(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e},t.prototype._queryFeature=function(e){return s(this,void 0,void 0,function(){var t,r,n;return a(this,function(i){switch(i.label){case 0:return[4,this._proxy.getObjectId(e)];case 1:return t=i.sent(),[4,this._proxy.queryFeatures(new E({objectIds:[t],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 2:return r=i.sent(),(n=r.features[0])?[2,n]:[2,null]}})})},t.prototype._hitTest=function(e,t){return s(this,void 0,void 0,function(){var r,n,i,o,s=this;return a(this,function(a){switch(a.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(e,t)];case 1:return 0!==(r=a.sent()).length?[3,3]:[4,g.after(1)];case 2:return a.sent(),[2,null];case 3:return function(e){return(2147483648&e)>>>31==1}(n=r[0])?[3,5]:[4,this._queryFeature(n)];case 4:return o=a.sent(),[2,_.andThen(o,function(e){return s._createHittestResult(l.fromJSON(e))})];case 5:return[4,this._proxy.getAggregate(n)];case 6:return i=a.sent(),_.isNone(i)?[2,null]:_.isSome(i.referenceId)?[4,this._queryFeature(i.referenceId)]:[3,8];case 7:return o=a.sent(),[2,_.andThen(o,function(e){return s._createHittestResult(l.fromJSON(e))})];case 8:return[2,this._createHittestResult(u.fromJSON(i))]}})})},n([b.property()],t.prototype,"_proxy",void 0),n([b.property()],t.prototype,"_pipelineIsUpdating",void 0),n([b.property()],t.prototype,"_updatingPipelineConfig",void 0),n([b.property()],t.prototype,"_effectiveRenderer",void 0),n([b.property()],t.prototype,"_aggregateValueRanges",void 0),n([b.property()],t.prototype,"_onGoingEdits",void 0),n([b.property({dependsOn:["layer.renderer","layer.featureReduction"]})],t.prototype,"_effectiveRendererPromise",null),n([b.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),n([b.property({type:q})],t.prototype,"filter",void 0),n([b.property({type:G})],t.prototype,"effect",null),n([b.property({readOnly:!0,dependsOn:["effect"]})],t.prototype,"effects",null),n([b.property()],t.prototype,"numFeatures",null),n([b.property({dependsOn:["layer.renderer","availableFields","layer.definitionExpression","layer.gdbVersion?","layer.filter?","layer.historicMoment?","layer.labelingInfo","layer.featureReduction","filter","effect","timeExtent","clips"]})],t.prototype,"renderingConfigHash",null),n([b.property()],t.prototype,"tileRenderer",void 0),n([b.property({dependsOn:["layer.renderer","tileRenderer.updating","_updatingPipelineConfig","_pipelineIsUpdating","_updatingRequiredFieldsPromise","_proxy","_proxy.isReady?","_onGoingEdits"]})],t.prototype,"updating",void 0),n([b.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(b.declared(C.FeatureLayerView(k.RefreshableLayerView(O.LayerView2D(I)))))}.apply(null,n))||(e.exports=i)},820:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(37),r(58),r(98)],void 0===(i=function(e,t,r,n,i){function o(e){return e.stops=function(e,t){return t.length<=u?t:(p.warn("Found "+t.length+" Visual Variable stops, but MapView only supports "+u+". Displayed stops will be simplified."),t.length>2*u?function(e,t){for(var r=t[0],i=t.slice(1),o=i.pop(),u=i[0].value,p=i[i.length-1].value,l=(p-u)/s,c=[],d=u;d<p;d+=l){for(var f=0;d>=i[f].value;)f++;var h=i[f],y=t[f-1],v=d-y.value,_=h.value===y.value?1:v/(h.value-y.value);if("color"===e){var g=i[f],m=t[f-1],b=g.color.clone();b.r=a(m.color.r,b.r,_),b.g=a(m.color.g,b.g,_),b.b=a(m.color.b,b.b,_),b.a=a(m.color.a,b.a,_),c.push({value:d,color:b,label:g.label})}else if("size"===e){var P=i[f],w=t[f-1],S=n.toPt(P.size),E=n.toPt(w.size),R=a(E,S,_);c.push({value:d,size:R,label:P.label})}else{var O=i[f],x=t[f-1],M=a(x.opacity,O.opacity,_);c.push({value:d,opacity:M,label:O.label})}}return[r].concat(c,[o])}(e,t):function(e){for(var t=e[0],r=e.slice(1),n=r.pop();r.length>s;){for(var i=0,o=0,a=1;a<r.length;a++){var u=r[a-1],p=r[a],l=Math.abs(p.value-u.value);l>o&&(o=l,i=a)}r.splice(i,1)}return[t].concat(r,[n])}(t))}(e.type,e.stops),e}function a(e,t,r){return(1-r)*e+r*t}Object.defineProperty(t,"__esModule",{value:!0});var s=i.definitions.WEBGL_MAX_INNER_STOPS,u=i.definitions.WEBGL_MAX_STOPS,p=r.getLogger("esri.renderers.visualVariables.support.utils");t.simplifyVVRenderer=function(e){if(!("visualVariables"in e&&e.visualVariables&&e.visualVariables.length))return e;var t=e.clone(),r=t.visualVariables.map(function(e){return function(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}(e)?o(e):e});return t.visualVariables=r,t}}.apply(null,n))||(e.exports=i)},821:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(41)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return n.toJSON(e)},t.analyzeRings=function(e,t,r){for(var n=[],i=[],o=0,a=0,s=0,u=e;s<u.length;s++){var p=u[s],l=a,c=p[0][0],d=p[0][1];n[a++]=c,n[a++]=d;for(var f=0,h=1;h<p.length;++h){var y=c,v=d;c=p[h][0],f+=(d=p[h][1])*y-c*v,n[a++]=c,n[a++]=d}t(f/2),f>0?(l-o>0&&(r(o,l,n,i),o=l),i.length=0):f<0&&l-o>0?i.push(.5*(l-o)):a=l}a-o>0&&r(o,a,n,i)}}.apply(null,n))||(e.exports=i)},822:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(29),r(33),r(37),r(40),r(30),r(387),r(2177),r(2179)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l){var c=o.getLogger("esri.views.layers.support.FeatureEffect");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=null,t.includedEffect=null,t.excludedEffect=null,t.excludedLabelsVisible=!1,t}var i;return n(t,e),i=t,Object.defineProperty(t.prototype,"insideEffect",{get:function(){return c.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){c.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideEffect",{get:function(){return c.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){c.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedIncludedEffect",{get:function(){return a.isSome(this.includedEffect)?"string"==typeof this.includedEffect?p.fromString(this.includedEffect):new l({from:p.fromString(this.includedEffect.from),to:p.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedExcludedEffect",{get:function(){return a.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?p.fromString(this.excludedEffect):new l({from:p.fromString(this.excludedEffect.from),to:p.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return(!a.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!a.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r([s.property({type:u,json:{write:!0}})],t.prototype,"filter",void 0),r([s.property({type:String,json:{write:!0}})],t.prototype,"includedEffect",void 0),r([s.property({type:String,json:{write:!0}})],t.prototype,"excludedEffect",void 0),r([s.property({type:Boolean,json:{write:!0}})],t.prototype,"excludedLabelsVisible",void 0),r([s.property({dependsOn:["includedEffect"]})],t.prototype,"parsedIncludedEffect",null),r([s.property({dependsOn:["excludedEffect"]})],t.prototype,"parsedExcludedEffect",null),r([s.property({dependsOn:["includedEffect","excludedEffect"]})],t.prototype,"renderingHash",null),i=r([s.subclass("esri.views.layers.support.FeatureEffect")],t)}(s.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},85:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(42),r(41),r(33),r(38),r(30)],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var p=new o.default({upperLeft:"upper-left",lowerLeft:"lower-left"}),l=function(e){function t(t){var r=e.call(this,t)||this;return r.extent=null,r.mode="view",r.originPosition="upper-left",r.tolerance=1,r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o(s.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))},n([u.property({type:i.Extent,json:{write:!0}})],t.prototype,"extent",void 0),n([u.property({type:["view","edit"],json:{write:!0}})],t.prototype,"mode",void 0),n([u.property({type:String,json:{read:p.read,write:p.write}})],t.prototype,"originPosition",void 0),n([u.property({type:Number,json:{write:!0}})],t.prototype,"tolerance",void 0),o=n([u.subclass("esri.tasks.support.QuantizationParameters")],t)}(u.declared(a.JSONSupport));t.default=l}.apply(null,n))||(e.exports=i)},93:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(29),r(28),r(33),r(30)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxPointCount=void 0,r.maxRecordCount=void 0,r.maxVertexCount=void 0,r.onStatisticField=null,r.outStatisticFieldName=null,r.statisticType=null,r}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})},n([o.property({type:Number,json:{write:!0}})],t.prototype,"maxPointCount",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"maxRecordCount",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"maxVertexCount",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"onStatisticField",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"outStatisticFieldName",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"statisticType",void 0),i=n([o.subclass("esri.tasks.support.StatisticDefinition")],t)}(o.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)}}]);